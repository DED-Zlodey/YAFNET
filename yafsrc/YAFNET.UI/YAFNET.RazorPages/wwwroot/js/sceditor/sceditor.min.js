!function() {
    "use strict";
    function t(e, t) {
        return typeof t === e;
    }
    var pe = t.bind(null, "string"), Ye = t.bind(null, "undefined"), he = t.bind(null, "function"), a = t.bind(null, "number");
    function n(e) {
        return !Object.keys(e).length;
    }
    function qe(e, t) {
        var n = e === !!e, o = n ? 2 : 1;
        const r = n ? t : e;
        var i = n && e;
        function a(e) {
            return null !== e && "object" == typeof e && Object.getPrototypeOf(e) === Object.prototype;
        }
        for (;o < arguments.length; o++) {
            var l, s = arguments[o];
            for (l in s) {
                var c, u, d = r[l], f = s[l];
                Ye(f) || "__proto__" !== l && "constructor" !== l && (u = a(f), 
                c = Array.isArray(f), i && (u || c) ? (u = a(d) === u && Array.isArray(d) === c, 
                r[l] = qe(!0, u ? d : c ? [] : {}, f)) : r[l] = f);
            }
        }
        return r;
    }
    function Ge(e, t) {
        t = e.indexOf(t);
        -1 < t && e.splice(t, 1);
    }
    function ge(t, n) {
        if (Array.isArray(t) || "length" in t && a(t.length)) for (let e = 0; e < t.length; e++) n(e, t[e]); else Object.keys(t).forEach(function(e) {
            n(e, t[e]);
        });
    }
    var l = {}, ve = 1, be = 3, s = 8;
    function r(e) {
        return e = parseFloat(e), isFinite(e) ? e : 0;
    }
    function ye(e, t, n) {
        var o = (n || document).createElement(e);
        return ge(t || {}, function(e, t) {
            "style" === e ? o.style.cssText = t : e in o ? o[e] = t : o.setAttribute(e, t);
        }), o;
    }
    function c(e, t) {
        for (var n = e || {}; (n = n.parentNode) && !/(9|11)/.test(n.nodeType); ) if (!t || Ae(n, t)) return n;
    }
    function we(e, t) {
        return Ae(e, t) ? e : c(e, t);
    }
    function xe(e) {
        e.parentNode && e.parentNode.removeChild(e);
    }
    function Te(e, t) {
        e.appendChild(t);
    }
    function Ee(e, t) {
        return e.querySelectorAll(t);
    }
    function Ce(n, e, o, r, i) {
        e.split(" ").forEach(function(e) {
            var t;
            pe(o) ? (t = r["_sce-event-" + e + o] || function(e) {
                for (var t = e.target; t && t !== n; ) {
                    if (Ae(t, o)) return void r.call(t, e);
                    t = t.parentNode;
                }
            }, r["_sce-event-" + e + o] = t) : (t = o, i = r), n.addEventListener(e, t, i || !1);
        });
    }
    function ke(n, e, o, r, i) {
        e.split(" ").forEach(function(e) {
            var t;
            pe(o) ? t = r["_sce-event-" + e + o] : (t = o, i = r), n.removeEventListener(e, t, i || !1);
        });
    }
    function De(e, t, n) {
        if (arguments.length < 3) return e.getAttribute(t);
        null == n ? Se(e, t) : e.setAttribute(t, n);
    }
    function Se(e, t) {
        e.removeAttribute(t);
    }
    function Xe(e) {
        Ne(e, "display", "none");
    }
    function Ke(e) {
        Ne(e, "display", "");
    }
    function Qe(e) {
        (tt(e) ? Xe : Ke)(e);
    }
    function Ne(n, e, t) {
        if (arguments.length < 3) {
            if (pe(e)) return 1 === n.nodeType ? getComputedStyle(n)[e] : null;
            ge(e, function(e, t) {
                Ne(n, e, t);
            });
        } else {
            var o = (t || 0 === t) && !isNaN(t);
            n.style[e] = o ? t + "px" : t;
        }
    }
    function u(e, t, n) {
        var o = arguments.length, r = {};
        if (e.nodeType === ve) return 1 === o ? (ge(e.attributes, function(e, t) {
            /^data\-/i.test(t.name) && (r[t.name.substr(5)] = t.value);
        }), r) : 2 === o ? De(e, "data-" + t) : void De(e, "data-" + t, String(n));
    }
    function Ae(e, t) {
        var n = !1;
        return n = e && e.nodeType === ve ? (e.matches || e.msMatchesSelector || e.webkitMatchesSelector).call(e, t) : n;
    }
    function _e(e, t) {
        t.parentNode.insertBefore(e, t);
    }
    function d(e) {
        return e.className.trim().split(/\s+/);
    }
    function Me(e, t) {
        return Ae(e, "." + t);
    }
    function Re(e, t) {
        const n = d(e);
        n.indexOf(t) < 0 && n.push(t), e.className = n.join(" ");
    }
    function Ze(e, t) {
        const n = d(e);
        Ge(n, t), e.className = n.join(" ");
    }
    function Le(e, t, n) {
        ((n = Ye(n) ? !Me(e, t) : n) ? Re : Ze)(e, t);
    }
    function Je(e, t) {
        var n, o;
        if (Ye(t)) return n = r((o = getComputedStyle(e)).paddingLeft) + r(o.paddingRight), 
        o = r(o.borderLeftWidth) + r(o.borderRightWidth), e.offsetWidth - n - o;
        Ne(e, "width", t);
    }
    function Oe(e, t) {
        var n, o;
        if (Ye(t)) return n = r((o = getComputedStyle(e)).paddingTop) + r(o.paddingBottom), 
        o = r(o.borderTopWidth) + r(o.borderBottomWidth), e.offsetHeight - n - o;
        Ne(e, "height", t);
    }
    function et(e, t, n) {
        var o;
        he(window.CustomEvent) ? o = new CustomEvent(t, {
            bubbles: !0,
            cancelable: !0,
            detail: n
        }) : (o = e.ownerDocument.createEvent("CustomEvent")).initCustomEvent(t, !0, !0, n), 
        e.dispatchEvent(o);
    }
    function tt(e) {
        return e.getClientRects().length;
    }
    function f(e, t, n, o, r) {
        for (e = r ? e.lastChild : e.firstChild; e; ) {
            var i = r ? e.previousSibling : e.nextSibling;
            if (!n && !1 === t(e) || !o && !1 === f(e, t, n, o, r) || n && !1 === t(e)) return !1;
            e = i;
        }
    }
    function nt(e, t, n, o) {
        f(e, t, n, o, !0);
    }
    function ot(e, t) {
        var n = (t = t || document).createDocumentFragment();
        const o = ye("div", {}, t);
        for (o.innerHTML = e; o.firstChild; ) Te(n, o.firstChild);
        return n;
    }
    function rt(e) {
        return e && (!Ae(e, "p,div") || e.className || De(e, "style") || !n(u(e)));
    }
    function it(e, t) {
        var n = ye(t, {}, e.ownerDocument);
        for (ge(e.attributes, function(e, t) {
            try {
                De(n, t.name, t.value);
            } catch (e) {}
        }); e.firstChild; ) Te(n, e.firstChild);
        return e.parentNode.replaceChild(n, e), n;
    }
    var m = "|body|hr|p|div|h1|h2|h3|h4|h5|h6|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|blockquote|center|details|section|article|aside|nav|main|header|hgroup|footer|fieldset|dl|dt|dd|figure|figcaption|";
    function at(e) {
        return !!/11?|9/.test(e.nodeType) && "|iframe|area|base|basefont|br|col|frame|hr|img|input|wbr|isindex|link|meta|param|command|embed|keygen|source|track|object|".indexOf(`|${e.nodeName.toLowerCase()}|`) < 0;
    }
    function Ie(e, t) {
        var n = (e || {}).nodeType || be;
        return n !== ve ? n === be : "code" === (n = e.tagName.toLowerCase()) ? !t : m.indexOf(`|${n}|`) < 0;
    }
    function p(e) {
        return e.lastChild && p(e.lastChild) && xe(e.lastChild), 3 === e.nodeType ? !e.nodeValue : at(e) && !e.childNodes.length;
    }
    function lt(e) {
        f(e, function(t) {
            var n = !Ie(t, !0) && t.nodeType !== s, o = t.parentNode;
            if (n && (Ie(o, !0) || "P" === o.tagName)) {
                let e = t;
                for (;Ie(e.parentNode, !0) || "P" === e.parentNode.tagName; ) e = e.parentNode;
                for (var r = g(e, t), i = t; o && Ie(o, !0); ) {
                    if (o.nodeType === ve) {
                        for (var a = o.cloneNode(); i.firstChild; ) Te(a, i.firstChild);
                        Te(i, a);
                    }
                    o = o.parentNode;
                }
                _e(i, e), p(r) || _e(r, i), p(e) && xe(e);
            }
            if (n && Ae(t, "ul,ol") && Ae(t.parentNode, "ul,ol")) {
                r = "li", n = (n = t).previousElementSibling;
                let e = !r || !n || Ae(n, r) ? n : null;
                e || _e(e = ye("li"), t), Te(e, t);
            }
        });
    }
    function h(e, t) {
        return e ? (t ? e.previousSibling : e.nextSibling) || h(e.parentNode, t) : null;
    }
    function st(e) {
        var t, n, o, r, i, a, l = Ne(e, "whiteSpace"), s = /line$/i.test(l), c = e.firstChild;
        if (!/pre(\-wrap)?$/i.test(l)) for (;c; ) {
            if (i = c.nextSibling, t = c.nodeValue, (n = c.nodeType) === ve && c.firstChild && st(c), 
            n === be) {
                for (n = h(c), o = h(c, !0), a = !1; Me(o, "sceditor-ignore"); ) o = h(o, !0);
                if (Ie(c) && o) {
                    for (r = o; r.lastChild; ) for (r = r.lastChild; Me(r, "sceditor-ignore"); ) r = h(r, !0);
                    a = r.nodeType === be ? /[\t\n\r ]$/.test(r.nodeValue) : !Ie(r);
                }
                t = t.replace(/\u200B/g, ""), o && Ie(o) && !a || (t = t.replace(s ? /^[\t ]+/ : /^[\t\n\r ]+/, "")), 
                (t = n && Ie(n) ? t : t.replace(s ? /[\t ]+$/ : /[\t\n\r ]+$/, "")).length ? c.nodeValue = t.replace(s ? /[\t ]+/g : /[\t\n\r ]+/g, " ") : xe(c);
            }
            c = i;
        }
    }
    function g(e, t) {
        const n = e.ownerDocument.createRange();
        return n.setStartBefore(e), n.setEndAfter(t), n.extractContents();
    }
    function ct(e) {
        for (var t = 0, n = 0; e; ) t += e.offsetLeft, n += e.offsetTop, e = e.offsetParent;
        return {
            left: t,
            top: n
        };
    }
    function v(e, t) {
        var n = e.style;
        return l[t] || (l[t] = t.replace(/^-ms-/, "ms-").replace(/-(\w)/g, function(e, t) {
            return t.toUpperCase();
        })), n = n[t = l[t]], "textAlign" === t && (n = n || Ne(e, t), Ne(e.parentNode, t) === n || "block" !== Ne(e, "display") || Ae(e, "hr,th")) ? "" : n;
    }
    function ut(e, t) {
        var n = e.attributes.length;
        if (n === t.attributes.length) {
            for (;n--; ) {
                var o = e.attributes[n];
                if ("style" === o.name ? !function(e, t) {
                    var n = e.style.length;
                    if (n === t.style.length) {
                        for (;n--; ) {
                            var o = e.style[n];
                            if (e.style[o] !== t.style[o]) return;
                        }
                        return 1;
                    }
                }(e, t) : o.value !== De(t, o.name)) return;
            }
            return 1;
        }
    }
    function dt(e) {
        for (;e.firstChild; ) _e(e.firstChild, e);
        xe(e);
    }
    var ft = {
        toolbar: "bold,italic,underline,strike|font,size,color|mark|email,link,unlink,quote,code|image|bulletlist,orderedlist|left,center,right|indent,outdent|cut,copy,pastetext,removeformat|undo,redo|youtube,vimeo,instagram,facebook,media,extensions|source|reply",
        toolbarExclude: null,
        maxLength: null,
        styles: [],
        themeMode: De(document.documentElement, "data-bs-theme") || "light",
        fonts: "Arial,Arial Black,Comic Sans MS,Courier New,Georgia,Impact,Sans-serif,Serif,Times New Roman,Trebuchet MS,Verdana",
        format: "bbcode",
        icons: "fontawesome",
        codeLanguages: [ {
            Value: "markup",
            Text: "Plain Text"
        }, {
            Value: "bash",
            Text: "Bash(shell)"
        }, {
            Value: "c",
            Text: "C"
        }, {
            Value: "cpp",
            Text: "C++"
        }, {
            Value: "csharp",
            Text: "C#"
        }, {
            Value: "css",
            Text: "CSS"
        }, {
            Value: "scss",
            Text: "SCSS"
        }, {
            Value: "git",
            Text: "Git"
        }, {
            Value: "markup",
            Text: "HTML"
        }, {
            Value: "java",
            Text: "Java"
        }, {
            Value: "javascript",
            Text: "JavaScript"
        }, {
            Value: "json",
            Text: "JSON"
        }, {
            Value: "python",
            Text: "Python"
        }, {
            Value: "sql",
            Text: "SQL"
        }, {
            Value: "markup",
            Text: "XML"
        }, {
            Value: "vb",
            Text: "Visual Basic"
        } ],
        colors: "#000000,#44B8FF,#1E92F7,#0074D9,#005DC2,#00369B,#b3d5f4|#444444,#C3FFFF,#9DF9FF,#7FDBFF,#68C4E8,#419DC1,#d9f4ff|#666666,#72FF84,#4CEA5E,#2ECC40,#17B529,#008E02,#c0f0c6|#888888,#FFFF44,#FFFA1E,#FFDC00,#E8C500,#C19E00,#fff5b3|#aaaaaa,#FFC95F,#FFA339,#FF851B,#E86E04,#C14700,#ffdbbb|#cccccc,#FF857A,#FF5F54,#FF4136,#E82A1F,#C10300,#ffc6c3|#eeeeee,#FF56FF,#FF30DC,#F012BE,#D900A7,#B20080,#fbb8ec|#ffffff,#F551FF,#CF2BE7,#B10DC9,#9A00B2,#9A00B2,#e8b6ef",
        locale: De(document.documentElement, "lang") || "en",
        charset: "utf-8",
        width: "100%",
        height: null,
        resizeEnabled: !0,
        resizeMinWidth: null,
        resizeMinHeight: null,
        resizeMaxHeight: null,
        resizeMaxWidth: null,
        resizeHeight: !0,
        resizeWidth: !0,
        dateFormat: "year-month-day",
        toolbarContainer: null,
        enablePasteFiltering: !1,
        disablePasting: !1,
        readOnly: !1,
        rtl: !1,
        autofocus: !1,
        autofocusEnd: !0,
        autoExpand: !1,
        autoUpdate: !1,
        spellcheck: !0,
        runWithoutWysiwygSupport: !1,
        startInSourceMode: !1,
        id: null,
        plugins: "undo,dragdrop",
        zIndex: null,
        bbcodeTrim: !1,
        disableBlockRemove: !0,
        allowedIframeUrls: [],
        parserOptions: {},
        dropDownCss: {},
        allowedTags: [],
        allowedAttributes: [ "contenteditable" ],
        extensionsUrl: "",
        root: "",
        attachmentsPreviewUrl: "",
        albumsPreviewUrl: "",
        onToggleMode: void 0
    }, b = /^(https?|s?ftp|mailto|spotify|skype|ssh|teamspeak|tel):|(\/\/)|data:image\/(png|bmp|gif|p?jpe?g);/i;
    function y(e) {
        return e.replace(/([\-.*+?^=!:${}()|\[\]\/\\])/g, "\\$1");
    }
    function He(e, t) {
        var n;
        return e && (!(n = {
            "&": "&amp;",
            "<": "&lt;",
            ">": "&gt;",
            "  ": "&nbsp; ",
            "\r\n": "<br />",
            "\r": "<br />",
            "\n": "<br />"
        }) !== t && (n['"'] = "&#34;", n["'"] = "&#39;", n["`"] = "&#96;"), e = e.replace(/ {2}|\r\n|[&<>\r\n'"`]/g, function(e) {
            return n[e] || e;
        })), e;
    }
    var w = {
        html: '<!DOCTYPE html><html data-bs-theme="{themeMode}"><head><meta http-equiv="Content-Type" content="text/html;charset={charset}" />{styles}</head><body style="min-height:265px" contenteditable="true" {spellcheck}><p></p></body></html>',
        style: '<link rel="stylesheet" type="text/css" href="{style}" />',
        toolbarButton: '<a class="btn sceditor-button sceditor-button-{name}" data-sceditor-command="{name}" unselectable="on"><span unselectable="on">  </span></a>',
        codeOpt: '<a class="sceditor-font-option dropdown-item" href="#" data-language="{language}">{languageName}</a>',
        extensionOpt: '<a class="sceditor-extension-option dropdown-item" href="#" data-language="{extension}">{extension}</a>',
        fontOpt: '<a class="sceditor-font-option dropdown-item" href="#" data-font="{font}"><font face="{font}">{font}</font></a>',
        sizeOpt: '<a class="sceditor-fontsize-option dropdown-item" data-size="{size}" href="#"><font size="{size}">{size}</font></a>',
        albums: '<form class="m-3"><div class="AlbumsListMenu"><div id="AlbumsListBox" class="content"><div id="AlbumsListPager"></div><div id="PostAlbumsLoader" class="text-center"><div class="fa-3x"><i class="fas fa-spinner fa-pulse"></i></div></div><div id="AlbumsListBox" class="content"><div id="PostAlbumsListPlaceholder" data-url="{root}" style="clear: both; "><ul class="AlbumsList list-group"></ul></div></div></form>',
        attachments: '<form class="m-3"><div class="AttachmentListMenu"><div id="AttachmentsListBox" class="content"><div id="AttachmentsListPager"></div><div id="PostAttachmentLoader" class="text-center"><div class="fa-3x"><i class="fas fa-spinner fa-pulse"></i></div></div><div id="AttachmentsListBox" class="content"><div id="PostAttachmentListPlaceholder" data-notext="{root}" style="clear: both; "><ul class="AttachmentList list-group"></ul></div><div class="OpenUploadDialog mt-1 d-grid gap-2"><button type="button" class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#UploadDialog">Upload</button></div></div></form>',
        pastetext: '<form class="m-3"><div class="mb-3"><label for="txt" class="form-label">{label}</label> <textarea cols="20" rows="7" id="txt" class="form-control"></textarea></div><input type="button" class="btn btn-sm btn-primary button" value="{insert}" /></div></form>',
        table: '<form class="m-3"><div class="mb-3"><label for="rows" class="form-label">{rows}</label><input type="text" id="rows" value="2" class="form-control" /></div><div class="mb-3"><label for="cols" class="form-label">{cols}</label><input type="text" id="cols" value="2" class="form-control" /></div><input type="button" class="btn btn-sm btn-primary button" value="{insert}" /></form>',
        image: '<form class="m-3"><div class="mb-3"><label for="link" class="form-label">{url}</label> <input type="text" id="link" dir="ltr" placeholder="https://" class="form-control" /></div><div class="mb-3"><label for="des" class="form-label">{desc}</label> <input type="text" id="des" class="form-control" /></div><input type="button" class="btn btn-sm btn-primary button" value="{insert}" /></form>',
        email: '<form class="m-3"><div class="mb-3"><label for="email" class="form-label">{label}</label> <input type="text" id="email" dir="ltr" class="form-control" /></div><div class="mb-3"><label for="des" class="form-label">{desc}</label> <input type="text" id="des" class="form-control" /></div><input type="button" class="btn btn-sm btn-primary button" value="{insert}" /></form>',
        link: '<form class="m-3"><div class="mb-3"><label for="link" class="form-label">{url}</label> <input type="text" id="link" dir="ltr" placeholder="https://" class="form-control" /></div><div class="mb-3"><label for="des" class="form-label">{desc}</label> <input type="text" id="des" class="form-control" /></div><input type="button" class="btn btn-sm btn-primary button" value="{ins}" /></form>',
        mediaMenu: '<form class="m-3"><div class="mb-3"><label for="link" class="form-label">{label}</label> <input type="url" id="link" dir="ltr" placeholder="https://" class="form-control" /></div><input type="button" class="btn btn-sm btn-primary button" value="{insert}" /></form>',
        youtubeMenu: '<form class="m-3"><div class="mb-3"><label for="link" class="form-label">{label}</label> <input type="text" id="link" dir="ltr" placeholder="https://" class="form-control" /></div><input type="button" class="btn btn-sm btn-primary button" value="{insert}" /></form>',
        instagramMenu: '<form class="m-3"><div class="mb-3"><label for="link" class="form-label">{label}</label> <input type="text" id="link" dir="ltr" placeholder="https://" class="form-control" /></div><input type="button" class="btn btn-sm btn-primary button" value="{insert}" /></form>',
        facebookMenu: '<form class="m-3"><div class="mb-3"><label for="link" class="form-label">{label}</label> <input type="text" id="link" dir="ltr" placeholder="https://" class="form-control" /></div><input type="button" class="btn btn-sm btn-primary button" value="{insert}" /></form>',
        facebook: '<div class="ratio ratio-1x1 border" data-oembed-url="{url}" data-facebook-url="{url}"><iframe src="https://www.facebook.com/plugins/post.php?href={url}"></iframe></div>',
        instagram: '<div class="ratio ratio-1x1 border" data-oembed-url="https://www.instagram.com/p/{id}" data-instagram-url="{url}"><iframe src="https://www.instagram.com/p/{id}/embed/captioned/"></iframe></div>',
        youtube: '<div data-oembed-url="https://youtube.com/embed/{id}" data-youtube-url="{url}" class="ratio ratio-16x9 border"><iframe src="https://youtube.com/embed/{id}?hd=1"></iframe></div>',
        vimeo: '<div data-oembed-url="https://vimeo.com/{vimeoId}" data-vimeo-url="{url}" class="ratio ratio-16x9 border"><iframe src="https://player.vimeo.com/video/{vimeoId}?show_title=1&show_byline=1&show_portrait=1&fullscreen=1"></iframe></div>'
    };
    function Fe(e, t, n) {
        var o = w[e];
        return Object.keys(t).forEach(function(e) {
            o = o.replace(new RegExp(y(`{${e}}`), "g"), t[e]);
        }), o = n ? ot(o) : o;
    }
    function x(n) {
        if ("mozHidden" in document) {
            let e = n.getBody(), t;
            for (;e; ) {
                if ((t = e).firstChild) t = t.firstChild; else {
                    for (;t && !t.nextSibling; ) t = t.parentNode;
                    t = t && t.nextSibling;
                }
                3 !== e.nodeType || !/[\n\r\t]+/.test(e.nodeValue) || /^pre/.test(Ne(e.parentNode, "whiteSpace")) || xe(e), 
                e = t;
            }
        }
    }
    var Pe = {
        albums: {
            exec: function(e) {
                var t = ye("div");
                Te(t, Fe("albums", {
                    root: this.opts.root
                }, !0)), this.createDropDown(e, "albums", t);
                getAlbumImagesData(5, 0, !1);
            },
            tooltip: "User Albums"
        },
        attachments: {
            exec: function(e) {
                var t = ye("div");
                Te(t, Fe("attachments", {
                    root: this.opts.root
                }, !0)), this.createDropDown(e, "attachments", t);
                getPaginationData(5, 0, !1);
            },
            tooltip: "User Attachments"
        },
        bold: {
            exec: "bold",
            tooltip: "Bold",
            shortcut: "Ctrl+B"
        },
        italic: {
            exec: "italic",
            tooltip: "Italic",
            shortcut: "Ctrl+I"
        },
        underline: {
            exec: "underline",
            tooltip: "Underline",
            shortcut: "Ctrl+U"
        },
        strike: {
            exec: "strikethrough",
            tooltip: "Strikethrough"
        },
        mark: {
            exec: function() {
                this.wysiwygEditorInsertHtml("<mark>", "</mark>");
            },
            tooltip: "Highlight",
            shortcut: "Ctrl+H"
        },
        left: {
            state: function(e) {
                var t;
                if (e = e && 3 === e.nodeType ? e.parentNode : e) return t = "ltr" === Ne(e, "direction"), 
                e = Ne(e, "textAlign"), /left/.test(e) || e === (t ? "start" : "end");
            },
            exec: "justifyleft",
            tooltip: "Align left"
        },
        center: {
            exec: "justifycenter",
            tooltip: "Center"
        },
        right: {
            state: function(e) {
                var t;
                if (e = e && 3 === e.nodeType ? e.parentNode : e) return t = "ltr" === Ne(e, "direction"), 
                e = Ne(e, "textAlign"), /right/.test(e) || e === (t ? "end" : "start");
            },
            exec: "justifyright",
            tooltip: "Align right"
        },
        justify: {
            exec: "justifyfull",
            tooltip: "Justify"
        },
        font: {
            _dropDown: function(t, e, n) {
                var o = ye("div");
                Ce(o, "click", "a", function(e) {
                    n(u(this, "font")), t.closeDropDown(!0), e.preventDefault();
                }), t.opts.fonts.split(",").forEach(function(e) {
                    Te(o, Fe("fontOpt", {
                        font: e
                    }, !0));
                }), t.createDropDown(e, "font-picker", o);
            },
            exec: function(e) {
                var t = this;
                Pe.font._dropDown(t, e, function(e) {
                    t.execCommand("fontname", e);
                });
            },
            tooltip: "Font Name"
        },
        size: {
            _dropDown: function(t, e, n) {
                var o = ye("div");
                Ce(o, "click", "a", function(e) {
                    n(u(this, "size")), t.closeDropDown(!0), e.preventDefault();
                });
                for (let e = 1; e <= 7; e++) Te(o, Fe("sizeOpt", {
                    size: e
                }, !0));
                t.createDropDown(e, "fontsize-picker", o);
            },
            exec: function(e) {
                var t = this;
                Pe.size._dropDown(t, e, function(e) {
                    t.execCommand("fontsize", e);
                });
            },
            tooltip: "Font Size"
        },
        color: {
            _dropDown: function(t, e, n) {
                var o = ye("div"), r = "";
                const i = Pe.color;
                i._htmlCache || (t.opts.colors.split("|").forEach(function(e) {
                    r += '<div class="sceditor-color-column">', e.split(",").forEach(function(e) {
                        r += `<a href="#" class="sceditor-color-option" style="background-color: ${e}" data-color="${e}"></a>`;
                    }), r += "</div>";
                }), i._htmlCache = r), Te(o, ot(i._htmlCache)), Ce(o, "click", "a", function(e) {
                    n(u(this, "color")), t.closeDropDown(!0), e.preventDefault();
                }), t.createDropDown(e, "color-picker", o);
            },
            exec: function(e) {
                var t = this;
                Pe.color._dropDown(t, e, function(e) {
                    t.execCommand("forecolor", e);
                });
            },
            tooltip: "Font Color"
        },
        removeformat: {
            exec: "removeformat",
            tooltip: "Remove Formatting"
        },
        cut: {
            exec: "cut",
            tooltip: "Cut",
            errorMessage: "Your browser does not allow the cut command. Please use the keyboard shortcut Ctrl/Cmd-X"
        },
        copy: {
            exec: "copy",
            tooltip: "Copy",
            errorMessage: "Your browser does not allow the copy command. Please use the keyboard shortcut Ctrl/Cmd-C"
        },
        paste: {
            exec: "paste",
            tooltip: "Paste",
            errorMessage: "Your browser does not allow the paste command. Please use the keyboard shortcut Ctrl/Cmd-V"
        },
        pastetext: {
            exec: function(e) {
                var t, n = ye("div"), o = this;
                Te(n, Fe("pastetext", {
                    label: o._("Paste your text inside the following box:"),
                    insert: o._("Insert")
                }, !0)), Ce(n, "click", ".button", function(e) {
                    (t = Ee(n, "#txt")[0].value) && o.wysiwygEditorInsertText(t), 
                    o.closeDropDown(!0), e.preventDefault();
                }), o.createDropDown(e, "pastetext", n);
            },
            tooltip: "Paste Text"
        },
        bulletlist: {
            exec: function() {
                x(this), this.execCommand("insertunorderedlist");
            },
            tooltip: "Bullet list"
        },
        orderedlist: {
            exec: function() {
                x(this), this.execCommand("insertorderedlist");
            },
            tooltip: "Numbered list"
        },
        indent: {
            state: function(e, t) {
                var n;
                return Ae(t, "li") || Ae(t, "ul,ol,menu") && (n = (t = this.getRangeHelper().selectedRange()).startContainer.parentNode, 
                t = t.endContainer.parentNode, n !== n.parentNode.firstElementChild || Ae(t, "li") && t !== t.parentNode.lastElementChild) ? 0 : -1;
            },
            exec: function() {
                var e = this.getRangeHelper().getFirstBlockParent();
                this.focus(), we(e, "ul,ol,menu") && this.execCommand("indent");
            },
            tooltip: "Add indent"
        },
        outdent: {
            state: function(e, t) {
                return we(t, "ul,ol,menu") ? 0 : -1;
            },
            exec: function() {
                we(this.getRangeHelper().getFirstBlockParent(), "ul,ol,menu") && this.execCommand("outdent");
            },
            tooltip: "Remove one indent"
        },
        table: {
            exec: function(e) {
                var r = this, i = ye("div");
                Te(i, Fe("table", {
                    rows: r._("Rows:"),
                    cols: r._("Cols:"),
                    insert: r._("Insert")
                }, !0)), Ce(i, "click", ".button", function(e) {
                    var t = Number(Ee(i, "#rows")[0].value), n = Number(Ee(i, "#cols")[0].value), o = '<table class="table">';
                    0 < t && 0 < n && (o += Array(t + 1).join("<tr>" + Array(n + 1).join('<td class="border"><br /></td>') + "</tr>"), 
                    r.wysiwygEditorInsertHtml(o += "</table>"), r.closeDropDown(!0), 
                    e.preventDefault());
                }), r.createDropDown(e, "inserttable", i);
            },
            tooltip: "Insert a table"
        },
        code: {
            _dropDown: function(t, e, n) {
                var o = ye("div");
                Ce(o, "click", "a", function(e) {
                    n(u(this, "language")), t.closeDropDown(!0), e.preventDefault();
                }), t.opts.codeLanguages.forEach(function(e) {
                    Te(o, Fe("codeOpt", {
                        language: e.Value,
                        languageName: e.Text
                    }, !0));
                }), t.createDropDown(e, "codeLanguage-picker", o);
            },
            exec: function(e) {
                var t = this;
                Pe.code._dropDown(t, e, function(e) {
                    t.wysiwygEditorInsertHtml(`<pre class="border border-danger rounded m-2 p-2"><code class="language-${e}">`, "</code></pre>");
                });
            },
            tooltip: "Code"
        },
        extensions: {
            _dropDown: function(t, e, n) {
                var o = ye("div");
                Ce(o, "click", "a", function(e) {
                    n(u(this, "language")), t.closeDropDown(!0), e.preventDefault();
                }), fetch(t.opts.extensionsUrl, {
                    method: "GET"
                }).then(e => e.json()).then(e => {
                    e.forEach(function(e) {
                        e.useToolbar || Te(o, Fe("extensionOpt", {
                            extension: e.name
                        }, !0));
                    });
                }), t.createDropDown(e, "extensions-picker", o);
            },
            exec: function(e) {
                var t = this;
                Pe.extensions._dropDown(t, e, function(e) {
                    t.wysiwygEditorInsertText(`[${e}]`, `[/${e}]`);
                });
            },
            tooltip: "More BBCode"
        },
        image: {
            _dropDown: function(n, e, o) {
                var r = ye("div"), i = (Te(r, Fe("image", {
                    url: n._("URL:"),
                    desc: n._("Description (optional):"),
                    insert: n._("Insert")
                }, !0)), Ee(r, "#link")[0]);
                function t(e) {
                    var t = Ee(r, "#des")[0].value;
                    i.value && o(i.value, t), n.closeDropDown(!0), e.preventDefault();
                }
                Ce(r, "click", ".button", t), Ce(r, "keypress", function(e) {
                    13 === e.which && i.value && t(e);
                }, !0), n.createDropDown(e, "insertimage", r);
            },
            exec: function(e) {
                var o = this;
                Pe.image._dropDown(o, e, function(e, t) {
                    var n = "";
                    t && (n += ` alt="${He(t)}"`), n += ` src="${He(e)}"`, o.wysiwygEditorInsertHtml(`<img${n} class="img-user-posted img-thumbnail" />`);
                });
            },
            tooltip: "Insert an image"
        },
        email: {
            _dropDown: function(n, e, o) {
                var r = ye("div");
                Te(r, Fe("email", {
                    label: n._("E-mail:"),
                    desc: n._("Description (optional):"),
                    insert: n._("Insert")
                }, !0)), Ce(r, "click", ".button", function(e) {
                    var t = Ee(r, "#email")[0].value;
                    t && o(t, Ee(r, "#des")[0].value), n.closeDropDown(!0), e.preventDefault();
                }), n.createDropDown(e, "insertemail", r);
            },
            exec: function(e) {
                var n = this;
                Pe.email._dropDown(n, e, function(e, t) {
                    !n.getRangeHelper().selectedHtml() || t ? n.wysiwygEditorInsertHtml(`<a href="mailto:${He(e)}">${He(t || e)}</a>`) : n.execCommand("createlink", "mailto:" + e);
                });
            },
            tooltip: "Insert an email"
        },
        link: {
            _dropDown: function(t, e, n) {
                var o = ye("div"), r = (Te(o, Fe("link", {
                    url: t._("URL:"),
                    desc: t._("Description (optional):"),
                    ins: t._("Insert")
                }, !0)), Ee(o, "#link")[0]);
                function i(e) {
                    r.value && n(r.value, Ee(o, "#des")[0].value), t.closeDropDown(!0), 
                    e.preventDefault();
                }
                Ce(o, "click", ".button", i), Ce(o, "keypress", function(e) {
                    13 === e.which && r.value && i(e);
                }, !0), t.createDropDown(e, "insertlink", o);
            },
            exec: function(e) {
                var n = this;
                Pe.link._dropDown(n, e, function(e, t) {
                    t || !n.getRangeHelper().selectedHtml() ? n.wysiwygEditorInsertHtml(`<a href="${He(e)}">${He(t || e)}</a>`) : n.execCommand("createlink", e);
                });
            },
            tooltip: "Insert a link"
        },
        unlink: {
            state: function() {
                return we(this.currentNode(), "a") ? 0 : -1;
            },
            exec: function() {
                var e = we(this.currentNode(), "a");
                if (e) {
                    for (;e.firstChild; ) _e(e.firstChild, e);
                    xe(e);
                }
            },
            tooltip: "Unlink"
        },
        quote: {
            exec: function(e, t, n) {
                var o = '<div class="border rounded mx-3 mb-3 p-3 border-secondary shadow-sm"><span contenteditable="false"><i class="fa fa-quote-left text-primary fs-4 me-2"></i></span>', r = "</div>";
                t ? (o = o + t + (n = n ? `<cite class="card-text text-end d-block text-body-secondary small">${He(n)}</cite>` : "") + r, 
                r = null) : this.getRangeHelper().selectedHtml(), this.wysiwygEditorInsertHtml(o, r);
            },
            tooltip: "Insert a Quote"
        },
        media: {
            _dropDown: function(n, e, o) {
                var r = ye("div");
                Te(r, Fe("mediaMenu", {
                    label: n._("Media URL:"),
                    insert: n._("Insert")
                }, !0)), Ce(r, "click", ".button", function(e) {
                    const t = Ee(r, "#link")[0].value;
                    t.startsWith("http") ? (o(t), n.closeDropDown(!0), e.preventDefault()) : alert("Not a valid URL!");
                }), n.createDropDown(e, "insertmedia", r);
            },
            exec: function(e) {
                var t = this;
                Pe.media._dropDown(t, e, function(e) {
                    t.wysiwygEditorInsertHtml(`[media]${e}[/media]`);
                });
            },
            tooltip: "Insert an embed media like a YouTube video, facebook post or twitter status."
        },
        vimeo: {
            _dropDown: function(o, e, r) {
                var i = ye("div");
                Te(i, Fe("youtubeMenu", {
                    label: o._("Video URL:"),
                    insert: o._("Insert")
                }, !0)), Ce(i, "click", ".button", function(e) {
                    const t = Ee(i, "#link")[0].value;
                    var n;
                    "" !== t && (n = t.match(/vimeo\..*\/(\d+)(?:$|\/)/), r(t, n[1])), 
                    o.closeDropDown(!0), e.preventDefault();
                }), o.createDropDown(e, "insertlink", i);
            },
            exec: function(e) {
                var n = this;
                Pe.vimeo._dropDown(n, e, function(e, t) {
                    n.wysiwygEditorInsertHtml(Fe("vimeo", {
                        url: e,
                        vimeoId: t
                    }));
                });
            },
            tooltip: "Insert a Vimeo video"
        },
        instagram: {
            _dropDown: function(o, e, r) {
                var i = ye("div");
                Te(i, Fe("instagramMenu", {
                    label: o._("Instagram Post URL:"),
                    insert: o._("Insert")
                }, !0)), Ce(i, "click", ".button", function(e) {
                    const t = Ee(i, "#link")[0].value;
                    var n;
                    "" !== t && (n = t.match(/\/(p|tv|reel)\/(.*?)\//)) && (n = n[2], 
                    r(t, n)), o.closeDropDown(!0), e.preventDefault();
                }), o.createDropDown(e, "insertlink", i);
            },
            exec: function(e) {
                var n = this;
                Pe.instagram._dropDown(n, e, function(e, t) {
                    n.wysiwygEditorInsertHtml(Fe("instagram", {
                        url: e,
                        id: t
                    }));
                });
            },
            tooltip: "Insert an Instagram Post"
        },
        facebook: {
            _dropDown: function(n, e, o) {
                var r = ye("div");
                Te(r, Fe("facebookMenu", {
                    label: n._("Facebook post URL:"),
                    insert: n._("Insert")
                }, !0)), Ce(r, "click", ".button", function(e) {
                    var t = Ee(r, "#link")[0].value;
                    o(t), n.closeDropDown(!0), e.preventDefault();
                }), n.createDropDown(e, "insertlink", r);
            },
            exec: function(e) {
                var t = this;
                Pe.facebook._dropDown(t, e, function(e) {
                    t.wysiwygEditorInsertHtml(Fe("facebook", {
                        url: e
                    }));
                });
            },
            tooltip: "Insert an Facebook Post"
        },
        youtube: {
            _dropDown: function(o, e, r) {
                var i = ye("div");
                Te(i, Fe("youtubeMenu", {
                    label: o._("Video URL:"),
                    insert: o._("Insert")
                }, !0)), Ce(i, "click", ".button", function(e) {
                    const t = Ee(i, "#link")[0].value;
                    var n = t.match(/(?:v=|v\/|embed\/|youtu.be\/)?([a-zA-Z0-9_-]{11})/);
                    n && /^[a-zA-Z0-9_\-]{11}$/.test(n[1]) && r(t, n[1]), o.closeDropDown(!0), 
                    e.preventDefault();
                }), o.createDropDown(e, "insertlink", i);
            },
            exec: function(e) {
                var n = this;
                Pe.youtube._dropDown(n, e, function(e, t) {
                    n.wysiwygEditorInsertHtml(Fe("youtube", {
                        url: e,
                        id: t
                    }));
                });
            },
            tooltip: "Insert a YouTube video"
        },
        date: {
            _date: function(e) {
                const t = new Date();
                var n = t.getYear(), o = t.getMonth() + 1, r = t.getDate();
                return o < 10 && (o = "0" + o), r < 10 && (r = "0" + r), e.opts.dateFormat.replace(/year/i, n = n < 2e3 ? 1900 + n : n).replace(/month/i, o).replace(/day/i, r);
            },
            exec: function() {
                this.insertText(Pe.date._date(this));
            },
            txtExec: function() {
                this.insertText(Pe.date._date(this));
            },
            tooltip: "Insert current date"
        },
        time: {
            _time: function() {
                const e = new Date();
                var t = e.getHours(), n = e.getMinutes(), o = e.getSeconds();
                return (t = t < 10 ? "0" + t : t) + ":" + (n = n < 10 ? "0" + n : n) + ":" + (o = o < 10 ? "0" + o : o);
            },
            exec: function() {
                this.insertText(Pe.time._time());
            },
            txtExec: function() {
                this.insertText(Pe.time._time());
            },
            tooltip: "Insert current time"
        },
        undo: {
            exec: "undo",
            tooltip: "Undo",
            shortcut: "Ctrl+Z"
        },
        redo: {
            exec: "redo",
            tooltip: "Redo",
            shortcut: "Ctrl+Y"
        },
        maximize: {
            state: function() {
                return this.maximize();
            },
            exec: function() {
                this.maximize(!this.maximize()), this.focus();
            },
            txtExec: function() {
                this.maximize(!this.maximize()), this.focus();
            },
            tooltip: "Maximize",
            shortcut: "Ctrl+Shift+M"
        },
        source: {
            state: function() {
                return this.sourceMode();
            },
            exec: function() {
                this.toggleSourceMode(), this.focus();
            },
            txtExec: function() {
                this.toggleSourceMode(), this.focus();
            },
            tooltip: "View source",
            shortcut: "Ctrl+Shift+S"
        },
        reply: {
            exec: function() {
                null !== document.getElementById("QuickReplyDialog") ? document.querySelector('[data-bs-save*="modal"]').click() : null !== document.querySelector('[formaction*="PostReply"]') ? document.querySelector('[formaction*="PostReply"]').click() : null !== document.querySelector('[id*="QuickReply"]') ? document.querySelector('[id*="QuickReply"]').click() : null !== document.querySelector('[id*="PostReply"]') && (window.location.href = document.querySelector('[id*="PostReply"]').href);
            },
            tooltip: "Post Reply",
            shortcut: "Ctrl+Enter"
        },
        ignore: {}
    }, T = {};
    function mt(i) {
        function a(e) {
            return "signal" + e.charAt(0).toUpperCase() + e.slice(1);
        }
        function e(e, t) {
            e = [].slice.call(e);
            for (var n, o = a(e.shift()), r = 0; r < l.length; r++) if (o in l[r] && (n = l[r][o].apply(i, e), 
            t)) return n;
        }
        var r = this, l = [];
        r.call = function() {
            e(arguments, !1);
        }, r.callOnlyFirst = function() {
            return e(arguments, !0);
        }, r.hasHandler = function(e) {
            var t = l.length;
            for (e = a(e); t--; ) if (e in l[t]) return !0;
            return !1;
        }, r.exists = function(e) {
            return e in T && ("function" == typeof (e = T[e]) && "object" == typeof e.prototype);
        }, r.isRegistered = function(t) {
            if (r.exists(t)) {
                let e = l.length;
                for (;e--; ) if (l[e] instanceof T[t]) return !0;
            }
            return !1;
        }, r.register = function(e) {
            return !(!r.exists(e) || r.isRegistered(e)) && (e = new T[e](), l.push(e), 
            "init" in e && e.init.call(i), !0);
        }, r.deregister = function(e) {
            var t, n = l.length, o = !1;
            if (r.isRegistered(e)) for (;n--; ) l[n] instanceof T[e] && (o = !0, 
            "destroy" in (t = l.splice(n, 1)[0]) && t.destroy.call(i));
            return o;
        }, r.destroy = function() {
            for (var e = l.length; e--; ) "destroy" in l[e] && l[e].destroy.call(i);
            l = [], i = null;
        };
    }
    mt.plugins = T;
    var E = function(e, t, n) {
        var o, r, i, a, l, s = "", c = e.startContainer, u = e.startOffset;
        for (c && 3 !== c.nodeType && (c = c.childNodes[u], u = 0), i = a = u; n > s.length && c && 3 === c.nodeType; ) o = c.nodeValue, 
        r = n - s.length, l && (a = o.length, i = 0), l = c, c = t ? (u = i = Math.max(a - r, 0), 
        s = o.substr(i, a - i) + s, l.previousSibling) : (u = i + (a = Math.min(r, o.length)), 
        s += o.substr(i, a), l.nextSibling);
        return {
            node: l || c,
            offset: u,
            text: s
        };
    };
    function pt(i, e, r) {
        var a, l, s = e || i.contentDocument || i.document, c = "sceditor-start-marker", u = "sceditor-end-marker", g = this;
        g.insertHTML = function(e, t) {
            if (!g.selectedRange()) return !1;
            t && (e += g.selectedHtml() + t);
            const n = ye("p", {}, s);
            var o = s.createDocumentFragment();
            for (n.innerHTML = r(e); n.firstChild; ) Te(o, n.firstChild);
            g.insertNode(o);
        }, l = function(e, t, n) {
            var o, r = s.createDocumentFragment();
            if ("string" == typeof e ? (t && (e += g.selectedHtml() + t), r = ot(e)) : (Te(r, e), 
            t && (Te(r, g.selectedRange().extractContents()), Te(r, t))), o = r.lastChild) {
                for (;!Ie(o.lastChild, !0); ) o = o.lastChild;
                return at(o) ? o.lastChild || Te(o, document.createTextNode("​")) : o = r, 
                g.removeMarkers(), Te(o, a(c)), Te(o, a(u)), n ? (Te(e = ye("div"), r), 
                e.innerHTML) : r;
            }
        }, g.insertNode = function(e, t) {
            var n, o, e = l(e, t);
            const r = g.selectedRange();
            var t = r.commonAncestorContainer, i = [];
            if (!e) return !1;
            function a(e) {
                e && p(e) && i.indexOf(e) < 0 && xe(e);
            }
            r.startContainer !== r.endContainer && (ge(t.childNodes, function(e, t) {
                p(t) && i.push(t);
            }), n = e.firstChild, o = e.lastChild), r.deleteContents(), t && 3 !== t.nodeType && !at(t) ? _e(e, t) : (r.insertNode(e), 
            a(n && n.previousSibling), a(o && o.nextSibling)), g.restoreRange();
        }, g.cloneSelected = function() {
            const e = g.selectedRange();
            if (e) return e.cloneRange();
        }, g.selectedRange = function() {
            var e, t;
            const n = i.getSelection();
            if (n) {
                if (n.rangeCount <= 0) {
                    for (t = s.body; t.firstChild; ) t = t.firstChild;
                    (e = s.createRange()).setStartBefore(t), n.addRange(e);
                }
                return e = 0 < n.rangeCount ? n.getRangeAt(0) : e;
            }
        }, g.hasSelection = function() {
            var e = i.getSelection();
            return e && 0 < e.rangeCount;
        }, g.selectedHtml = function() {
            var e;
            const t = g.selectedRange();
            return t ? (Te(e = ye("p", {}, s), t.cloneContents()), e.innerHTML) : "";
        }, g.parentNode = function() {
            var e = g.selectedRange();
            if (e) return e.commonAncestorContainer;
        }, g.getFirstBlockParent = function(e) {
            var t = function(e) {
                return Ie(e, !0) ? (e = e ? e.parentNode : null) && t(e) : e;
            };
            return t(e || g.parentNode());
        }, g.insertNodeAt = function(e, t) {
            var n = g.selectedRange();
            const o = g.cloneSelected();
            if (!o) return !1;
            o.collapse(e), o.insertNode(t), g.selectRange(n);
        }, a = function(e) {
            g.removeMarker(e);
            const t = ye("span", {
                id: e,
                className: "sceditor-selection sceditor-ignore",
                style: "display:none;line-height:0"
            }, s);
            return t.innerHTML = " ", t;
        }, g.insertMarkers = function() {
            var e = g.selectedRange();
            const t = a(c);
            g.removeMarkers(), g.insertNodeAt(!0, t), e && e.collapsed ? t.parentNode.insertBefore(a(u), t.nextSibling) : g.insertNodeAt(!1, a(u));
        }, g.getMarker = function(e) {
            return s.getElementById(e);
        }, g.removeMarker = function(e) {
            e = g.getMarker(e);
            e && xe(e);
        }, g.removeMarkers = function() {
            g.removeMarker(c), g.removeMarker(u);
        }, g.saveRange = function() {
            g.insertMarkers();
        }, g.selectRange = function(e) {
            var t;
            const n = i.getSelection();
            var o = e.endContainer;
            if (e.collapsed && o && !Ie(o, !0)) {
                for (t = o.lastChild; t && Ae(t, ".sceditor-ignore"); ) t = t.previousSibling;
                if (Ae(t, "br")) {
                    const r = s.createRange();
                    r.setEndAfter(t), r.collapse(!1), g.compare(e, r) && (e.setStartBefore(t), 
                    e.collapse(!0));
                }
            }
            n && (g.clear(), n.addRange(e));
        }, g.restoreRange = function() {
            var e, t = g.selectedRange(), n = g.getMarker(c), o = g.getMarker(u);
            if (!n || !o || !t) return !1;
            e = n.nextSibling === o, (t = s.createRange()).setStartBefore(n), t.setEndAfter(o), 
            e && t.collapse(!0), g.selectRange(t), g.removeMarkers();
        }, g.selectOuterText = function(e, t) {
            const n = g.cloneSelected();
            if (!n) return !1;
            n.collapse(!1), e = E(n, !0, e), t = E(n, !1, t), n.setStart(e.node, e.offset), 
            n.setEnd(t.node, t.offset), g.selectRange(n);
        }, g.getOuterText = function(e, t) {
            const n = g.cloneSelected();
            return n ? (n.collapse(!e), E(n, e, t).text) : "";
        }, g.replaceKeyword = function(e, t, n, o, r, i) {
            n || e.sort(function(e, t) {
                return e[0].length - t[0].length;
            });
            var a, l, s, c, u, d, f, m = "(^|[\\s    ])", p = e.length, h = r ? 1 : 0, n = o || e[p - 1][0].length;
            for (r && n++, i = i || "", c = (a = g.getOuterText(!0, n)).length, 
            a += i, t && (a += g.getOuterText(!1, n)); p--; ) if (f = (d = e[p][0]).length, 
            s = Math.max(0, c - f - h), l = -1, r ? (u = a.substr(s).match(new RegExp(m + y(d) + m))) && (l = u.index + s + u[1].length) : l = a.indexOf(d, s), 
            -1 < l && l <= c && c <= l + f + h) return g.selectOuterText(u = c - l, f - u - (/^\S/.test(i) ? 1 : 0)), 
            g.insertHTML(e[p][1]), !0;
            return !1;
        }, g.compare = function(e, t) {
            return t = t || g.selectedRange(), e && t ? 0 === e.compareBoundaryPoints(Range.END_TO_END, t) && 0 === e.compareBoundaryPoints(Range.START_TO_START, t) : !e && !t;
        }, g.clear = function() {
            const e = i.getSelection();
            e && (e.removeAllRanges ? e.removeAllRanges() : e.empty && e.empty());
        };
    }
    var C, i = navigator.userAgent, ht = /iPhone|iPod|iPad| wosbrowser\//i.test(i), gt = function() {
        var e, t, n = !!window.document.documentMode, o = "-ms-ime-align" in document.documentElement.style;
        const r = document.createElement("div");
        return r.contentEditable = !0, "contentEditable" in document.documentElement && "true" === r.contentEditable && (t = /Opera Mobi|Opera Mini/i.test(i), 
        /Android/i.test(i) && (t = !0, /Safari/.test(i) && (t = !(e = /Safari\/(\d+)/.exec(i)) || !e[1] || e[1] < 534)), 
        / Silk\//i.test(i) && (t = !(e = /AppleWebKit\/(\d+)/.exec(i)) || !e[1] || e[1] < 534), 
        ht && (t = /OS [0-4](_\d)+ like Mac/i.test(i)), /Firefox/i.test(i) && (t = !1), 
        /OneBrowser/i.test(i) && (t = !1), "UCWEB" === navigator.vendor && (t = !1), 
        !(t = n || o ? !0 : t));
    }();
    const {
        entries: vt,
        setPrototypeOf: k,
        isFrozen: D,
        getPrototypeOf: S,
        getOwnPropertyDescriptor: N
    } = Object;
    let {
        freeze: Be,
        seal: e,
        create: A
    } = Object, {
        apply: _,
        construct: M
    } = "undefined" != typeof Reflect && Reflect;
    _ = _ || function(e, t, n) {
        return e.apply(t, n);
    }, Be = Be || function(e) {
        return e;
    }, e = e || function(e) {
        return e;
    }, M = M || function(e, t) {
        return new e(...t);
    };
    const bt = o(Array.prototype.forEach), yt = o(Array.prototype.pop), wt = o(Array.prototype.push), xt = o(String.prototype.toLowerCase), Tt = o(String.prototype.toString), Et = o(String.prototype.match), We = o(String.prototype.replace), Ct = o(String.prototype.indexOf), kt = o(String.prototype.trim), Ve = o(RegExp.prototype.test), Dt = (C = TypeError, 
    function() {
        for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++) t[n] = arguments[n];
        return M(C, t);
    });
    function o(r) {
        return function(e) {
            for (var t = arguments.length, n = new Array(1 < t ? t - 1 : 0), o = 1; o < t; o++) n[o - 1] = arguments[o];
            return _(r, e, n);
        };
    }
    function je(t, n, o) {
        var e, r;
        o = null != (e = o) ? e : xt, k && k(t, null);
        let i = n.length;
        for (;i--; ) {
            let e = n[i];
            "string" != typeof e || (r = o(e)) !== e && (D(n) || (n[i] = r), e = r), 
            t[e] = !0;
        }
        return t;
    }
    function St(e) {
        const t = A(null);
        for (var [ n, o ] of vt(e)) t[n] = o;
        return t;
    }
    function Nt(e, t) {
        for (;null !== e; ) {
            var n = N(e, t);
            if (n) {
                if (n.get) return o(n.get);
                if ("function" == typeof n.value) return o(n.value);
            }
            e = S(e);
        }
        return function(e) {
            return console.warn("fallback value for", e), null;
        };
    }
    const At = Be([ "a", "abbr", "acronym", "address", "area", "article", "aside", "audio", "b", "bdi", "bdo", "big", "blink", "blockquote", "body", "br", "button", "canvas", "caption", "center", "cite", "code", "col", "colgroup", "content", "data", "datalist", "dd", "decorator", "del", "details", "dfn", "dialog", "dir", "div", "dl", "dt", "element", "em", "fieldset", "figcaption", "figure", "font", "footer", "form", "h1", "h2", "h3", "h4", "h5", "h6", "head", "header", "hgroup", "hr", "html", "i", "img", "input", "ins", "kbd", "label", "legend", "li", "main", "map", "mark", "marquee", "menu", "menuitem", "meter", "nav", "nobr", "ol", "optgroup", "option", "output", "p", "picture", "pre", "progress", "q", "rp", "rt", "ruby", "s", "samp", "section", "select", "shadow", "small", "source", "spacer", "span", "strike", "strong", "style", "sub", "summary", "sup", "table", "tbody", "td", "template", "textarea", "tfoot", "th", "thead", "time", "tr", "track", "tt", "u", "ul", "var", "video", "wbr" ]), _t = Be([ "svg", "a", "altglyph", "altglyphdef", "altglyphitem", "animatecolor", "animatemotion", "animatetransform", "circle", "clippath", "defs", "desc", "ellipse", "filter", "font", "g", "glyph", "glyphref", "hkern", "image", "line", "lineargradient", "marker", "mask", "metadata", "mpath", "path", "pattern", "polygon", "polyline", "radialgradient", "rect", "stop", "style", "switch", "symbol", "text", "textpath", "title", "tref", "tspan", "view", "vkern" ]), Mt = Be([ "feBlend", "feColorMatrix", "feComponentTransfer", "feComposite", "feConvolveMatrix", "feDiffuseLighting", "feDisplacementMap", "feDistantLight", "feDropShadow", "feFlood", "feFuncA", "feFuncB", "feFuncG", "feFuncR", "feGaussianBlur", "feImage", "feMerge", "feMergeNode", "feMorphology", "feOffset", "fePointLight", "feSpecularLighting", "feSpotLight", "feTile", "feTurbulence" ]), Rt = Be([ "animate", "color-profile", "cursor", "discard", "font-face", "font-face-format", "font-face-name", "font-face-src", "font-face-uri", "foreignobject", "hatch", "hatchpath", "mesh", "meshgradient", "meshpatch", "meshrow", "missing-glyph", "script", "set", "solidcolor", "unknown", "use" ]), Lt = Be([ "math", "menclose", "merror", "mfenced", "mfrac", "mglyph", "mi", "mlabeledtr", "mmultiscripts", "mn", "mo", "mover", "mpadded", "mphantom", "mroot", "mrow", "ms", "mspace", "msqrt", "mstyle", "msub", "msup", "msubsup", "mtable", "mtd", "mtext", "mtr", "munder", "munderover", "mprescripts" ]), Ot = Be([ "maction", "maligngroup", "malignmark", "mlongdiv", "mscarries", "mscarry", "msgroup", "mstack", "msline", "msrow", "semantics", "annotation", "annotation-xml", "mprescripts", "none" ]), It = Be([ "#text" ]), Ht = Be([ "accept", "action", "align", "alt", "autocapitalize", "autocomplete", "autopictureinpicture", "autoplay", "background", "bgcolor", "border", "capture", "cellpadding", "cellspacing", "checked", "cite", "class", "clear", "color", "cols", "colspan", "controls", "controlslist", "coords", "crossorigin", "datetime", "decoding", "default", "dir", "disabled", "disablepictureinpicture", "disableremoteplayback", "download", "draggable", "enctype", "enterkeyhint", "face", "for", "headers", "height", "hidden", "high", "href", "hreflang", "id", "inputmode", "integrity", "ismap", "kind", "label", "lang", "list", "loading", "loop", "low", "max", "maxlength", "media", "method", "min", "minlength", "multiple", "muted", "name", "nonce", "noshade", "novalidate", "nowrap", "open", "optimum", "pattern", "placeholder", "playsinline", "poster", "preload", "pubdate", "radiogroup", "readonly", "rel", "required", "rev", "reversed", "role", "rows", "rowspan", "spellcheck", "scope", "selected", "shape", "size", "sizes", "span", "srclang", "start", "src", "srcset", "step", "style", "summary", "tabindex", "title", "translate", "type", "usemap", "valign", "value", "width", "xmlns", "slot" ]), Ft = Be([ "accent-height", "accumulate", "additive", "alignment-baseline", "ascent", "attributename", "attributetype", "azimuth", "basefrequency", "baseline-shift", "begin", "bias", "by", "class", "clip", "clippathunits", "clip-path", "clip-rule", "color", "color-interpolation", "color-interpolation-filters", "color-profile", "color-rendering", "cx", "cy", "d", "dx", "dy", "diffuseconstant", "direction", "display", "divisor", "dur", "edgemode", "elevation", "end", "fill", "fill-opacity", "fill-rule", "filter", "filterunits", "flood-color", "flood-opacity", "font-family", "font-size", "font-size-adjust", "font-stretch", "font-style", "font-variant", "font-weight", "fx", "fy", "g1", "g2", "glyph-name", "glyphref", "gradientunits", "gradienttransform", "height", "href", "id", "image-rendering", "in", "in2", "k", "k1", "k2", "k3", "k4", "kerning", "keypoints", "keysplines", "keytimes", "lang", "lengthadjust", "letter-spacing", "kernelmatrix", "kernelunitlength", "lighting-color", "local", "marker-end", "marker-mid", "marker-start", "markerheight", "markerunits", "markerwidth", "maskcontentunits", "maskunits", "max", "mask", "media", "method", "mode", "min", "name", "numoctaves", "offset", "operator", "opacity", "order", "orient", "orientation", "origin", "overflow", "paint-order", "path", "pathlength", "patterncontentunits", "patterntransform", "patternunits", "points", "preservealpha", "preserveaspectratio", "primitiveunits", "r", "rx", "ry", "radius", "refx", "refy", "repeatcount", "repeatdur", "restart", "result", "rotate", "scale", "seed", "shape-rendering", "specularconstant", "specularexponent", "spreadmethod", "startoffset", "stddeviation", "stitchtiles", "stop-color", "stop-opacity", "stroke-dasharray", "stroke-dashoffset", "stroke-linecap", "stroke-linejoin", "stroke-miterlimit", "stroke-opacity", "stroke", "stroke-width", "style", "surfacescale", "systemlanguage", "tabindex", "targetx", "targety", "transform", "transform-origin", "text-anchor", "text-decoration", "text-rendering", "textlength", "type", "u1", "u2", "unicode", "values", "viewbox", "visibility", "version", "vert-adv-y", "vert-origin-x", "vert-origin-y", "width", "word-spacing", "wrap", "writing-mode", "xchannelselector", "ychannelselector", "x", "x1", "x2", "xmlns", "y", "y1", "y2", "z", "zoomandpan" ]), Pt = Be([ "accent", "accentunder", "align", "bevelled", "close", "columnsalign", "columnlines", "columnspan", "denomalign", "depth", "dir", "display", "displaystyle", "encoding", "fence", "frame", "height", "href", "id", "largeop", "length", "linethickness", "lspace", "lquote", "mathbackground", "mathcolor", "mathsize", "mathvariant", "maxsize", "minsize", "movablelimits", "notation", "numalign", "open", "rowalign", "rowlines", "rowspacing", "rowspan", "rspace", "rquote", "scriptlevel", "scriptminsize", "scriptsizemultiplier", "selection", "separator", "separators", "stretchy", "subscriptshift", "supscriptshift", "symmetric", "voffset", "width", "xmlns" ]), zt = Be([ "xlink:href", "xml:id", "xlink:title", "xml:space", "xmlns:xlink" ]);
    var R = e(/\{\{[\w\W]*|[\w\W]*\}\}/gm), L = e(/<%[\w\W]*|[\w\W]*%>/gm), O = e(/\${[\w\W]*}/gm), I = e(/^data-[\-\w.\u00B7-\uFFFF]/), H = e(/^aria-[\-\w]+$/);
    const Ut = e(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i);
    var F = e(/^(?:\w+script|data):/i), P = e(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g);
    const Bt = e(/^html$/i);
    var Wt = Object.freeze({
        __proto__: null,
        MUSTACHE_EXPR: R,
        ERB_EXPR: L,
        TMPLIT_EXPR: O,
        DATA_ATTR: I,
        ARIA_ATTR: H,
        IS_ALLOWED_URI: Ut,
        IS_SCRIPT_OR_DATA: F,
        ATTR_WHITESPACE: P,
        DOCTYPE_NAME: Bt
    });
    var Vt = function H(e) {
        e = 0 < arguments.length && void 0 !== e ? e : "undefined" == typeof window ? null : window;
        const c = e => H(e);
        if (c.version = "3.0.5", c.removed = [], !e || !e.document || 9 !== e.document.nodeType) return c.isSupported = !1, 
        c;
        const l = e.document, F = l.currentScript;
        let i = e.document;
        const {
            DocumentFragment: P,
            HTMLTemplateElement: z,
            Node: s,
            Element: U,
            NodeFilter: t,
            NamedNodeMap: B = e.NamedNodeMap || e.MozNamedAttrMap,
            HTMLFormElement: W,
            DOMParser: V,
            trustedTypes: u
        } = e;
        e = U.prototype;
        const j = Nt(e, "cloneNode"), $ = Nt(e, "nextSibling"), Y = Nt(e, "childNodes"), a = Nt(e, "parentNode");
        "function" == typeof z && (e = i.createElement("template")).content && e.content.ownerDocument && (i = e.content.ownerDocument);
        let d, f = "";
        const {
            implementation: m,
            createNodeIterator: q,
            createDocumentFragment: G,
            getElementsByTagName: X
        } = i, K = l.importNode;
        let o = {};
        c.isSupported = "function" == typeof vt && "function" == typeof a && m && void 0 !== m.createHTMLDocument;
        const {
            MUSTACHE_EXPR: p,
            ERB_EXPR: Q,
            TMPLIT_EXPR: Z,
            DATA_ATTR: J,
            ARIA_ATTR: ee,
            IS_SCRIPT_OR_DATA: te,
            ATTR_WHITESPACE: ne
        } = Wt;
        let oe = Wt.IS_ALLOWED_URI, h = null;
        const re = je({}, [ ...At, ..._t, ...Mt, ...Lt, ...It ]);
        let g = null;
        const ie = je({}, [ ...Ht, ...Ft, ...Pt, ...zt ]);
        let v = Object.seal(Object.create(null, {
            tagNameCheck: {
                writable: !0,
                configurable: !1,
                enumerable: !0,
                value: null
            },
            attributeNameCheck: {
                writable: !0,
                configurable: !1,
                enumerable: !0,
                value: null
            },
            allowCustomizedBuiltInElements: {
                writable: !0,
                configurable: !1,
                enumerable: !0,
                value: !1
            }
        })), b = null, ae = null, le = !0, se = !0, ce = !1, ue = !0, y = !1, w = !1, de = !1, fe = !1, x = !1, T = !1, E = !1, me = !0, pe = !1;
        const he = "user-content-";
        let ge = !0, C = !1, n = {}, k = null;
        const ve = je({}, [ "annotation-xml", "audio", "colgroup", "desc", "foreignobject", "head", "iframe", "math", "mi", "mn", "mo", "ms", "mtext", "noembed", "noframes", "noscript", "plaintext", "script", "style", "svg", "template", "thead", "title", "video", "xmp" ]);
        let be = null;
        const ye = je({}, [ "audio", "video", "img", "source", "image", "track" ]);
        let we = null;
        const xe = je({}, [ "alt", "class", "for", "id", "label", "name", "pattern", "placeholder", "role", "summary", "title", "value", "style", "xmlns" ]), D = "http://www.w3.org/1998/Math/MathML", S = "http://www.w3.org/2000/svg", N = "http://www.w3.org/1999/xhtml";
        let A = N, Te, Ee = null;
        const Ce = je({}, [ D, S, N ], Tt);
        let _;
        const ke = [ "application/xhtml+xml", "text/html" ];
        let M, r = null;
        function De(e) {
            return e instanceof RegExp || e instanceof Function;
        }
        function Se(e) {
            if (!r || r !== e) {
                if (e = St(e = e && "object" == typeof e ? e : {}), _ = _ = -1 === ke.indexOf(e.PARSER_MEDIA_TYPE) ? "text/html" : e.PARSER_MEDIA_TYPE, 
                M = "application/xhtml+xml" === _ ? Tt : xt, h = "ALLOWED_TAGS" in e ? je({}, e.ALLOWED_TAGS, M) : re, 
                g = "ALLOWED_ATTR" in e ? je({}, e.ALLOWED_ATTR, M) : ie, Ee = "ALLOWED_NAMESPACES" in e ? je({}, e.ALLOWED_NAMESPACES, Tt) : Ce, 
                we = "ADD_URI_SAFE_ATTR" in e ? je(St(xe), e.ADD_URI_SAFE_ATTR, M) : xe, 
                be = "ADD_DATA_URI_TAGS" in e ? je(St(ye), e.ADD_DATA_URI_TAGS, M) : ye, 
                k = "FORBID_CONTENTS" in e ? je({}, e.FORBID_CONTENTS, M) : ve, 
                b = "FORBID_TAGS" in e ? je({}, e.FORBID_TAGS, M) : {}, ae = "FORBID_ATTR" in e ? je({}, e.FORBID_ATTR, M) : {}, 
                n = "USE_PROFILES" in e && e.USE_PROFILES, le = !1 !== e.ALLOW_ARIA_ATTR, 
                se = !1 !== e.ALLOW_DATA_ATTR, ce = e.ALLOW_UNKNOWN_PROTOCOLS || !1, 
                ue = !1 !== e.ALLOW_SELF_CLOSE_IN_ATTR, y = e.SAFE_FOR_TEMPLATES || !1, 
                w = e.WHOLE_DOCUMENT || !1, x = e.RETURN_DOM || !1, T = e.RETURN_DOM_FRAGMENT || !1, 
                E = e.RETURN_TRUSTED_TYPE || !1, fe = e.FORCE_BODY || !1, me = !1 !== e.SANITIZE_DOM, 
                pe = e.SANITIZE_NAMED_PROPS || !1, ge = !1 !== e.KEEP_CONTENT, C = e.IN_PLACE || !1, 
                oe = e.ALLOWED_URI_REGEXP || Ut, A = e.NAMESPACE || N, v = e.CUSTOM_ELEMENT_HANDLING || {}, 
                e.CUSTOM_ELEMENT_HANDLING && De(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck) && (v.tagNameCheck = e.CUSTOM_ELEMENT_HANDLING.tagNameCheck), 
                e.CUSTOM_ELEMENT_HANDLING && De(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck) && (v.attributeNameCheck = e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck), 
                e.CUSTOM_ELEMENT_HANDLING && "boolean" == typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements && (v.allowCustomizedBuiltInElements = e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements), 
                y && (se = !1), T && (x = !0), n && (h = je({}, [ ...It ]), g = [], 
                !0 === n.html && (je(h, At), je(g, Ht)), !0 === n.svg && (je(h, _t), 
                je(g, Ft), je(g, zt)), !0 === n.svgFilters && (je(h, Mt), je(g, Ft), 
                je(g, zt)), !0 === n.mathMl && (je(h, Lt), je(g, Pt), je(g, zt))), 
                e.ADD_TAGS && je(h = h === re ? St(h) : h, e.ADD_TAGS, M), e.ADD_ATTR && je(g = g === ie ? St(g) : g, e.ADD_ATTR, M), 
                e.ADD_URI_SAFE_ATTR && je(we, e.ADD_URI_SAFE_ATTR, M), e.FORBID_CONTENTS && je(k = k === ve ? St(k) : k, e.FORBID_CONTENTS, M), 
                ge && (h["#text"] = !0), w && je(h, [ "html", "head", "body" ]), 
                h.table && (je(h, [ "tbody" ]), delete b.tbody), e.TRUSTED_TYPES_POLICY) {
                    if ("function" != typeof e.TRUSTED_TYPES_POLICY.createHTML) throw Dt('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');
                    if ("function" != typeof e.TRUSTED_TYPES_POLICY.createScriptURL) throw Dt('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');
                    d = e.TRUSTED_TYPES_POLICY, f = d.createHTML("");
                } else null !== (d = void 0 === d ? function(e, t) {
                    if ("object" != typeof e || "function" != typeof e.createPolicy) return null;
                    let n = null;
                    var o = "data-tt-policy-suffix", t = "dompurify" + ((n = t && t.hasAttribute(o) ? t.getAttribute(o) : n) ? "#" + n : "");
                    try {
                        return e.createPolicy(t, {
                            createHTML(e) {
                                return e;
                            },
                            createScriptURL(e) {
                                return e;
                            }
                        });
                    } catch (e) {
                        return console.warn("TrustedTypes policy " + t + " could not be created."), 
                        null;
                    }
                }(u, F) : d) && "string" == typeof f && (f = d.createHTML(""));
                Be && Be(e), r = e;
            }
        }
        function R(t) {
            wt(c.removed, {
                element: t
            });
            try {
                t.parentNode.removeChild(t);
            } catch (e) {
                t.remove();
            }
        }
        function Ne(e) {
            let t, n;
            fe ? e = "<remove></remove>" + e : (o = Et(e, /^[\r\n\t ]+/), n = o && o[0]), 
            "application/xhtml+xml" === _ && A === N && (e = '<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>' + e + "</body></html>");
            var o = d ? d.createHTML(e) : e;
            if (A === N) try {
                t = new V().parseFromString(o, _);
            } catch (e) {}
            if (!t || !t.documentElement) {
                t = m.createDocument(A, "template", null);
                try {
                    t.documentElement.innerHTML = Te ? f : o;
                } catch (e) {}
            }
            const r = t.body || t.documentElement;
            return e && n && r.insertBefore(i.createTextNode(n), r.childNodes[0] || null), 
            A === N ? X.call(t, w ? "html" : "body")[0] : w ? t.documentElement : r;
        }
        function Ae(e) {
            return q.call(e.ownerDocument || e, e, t.SHOW_ELEMENT | t.SHOW_COMMENT | t.SHOW_TEXT, null, !1);
        }
        function L(e) {
            return "object" == typeof s ? e instanceof s : e && "object" == typeof e && "number" == typeof e.nodeType && "string" == typeof e.nodeName;
        }
        function _e(t) {
            var e;
            if (I("beforeSanitizeElements", t, null), !((n = t) instanceof W) || "string" == typeof n.nodeName && "string" == typeof n.textContent && "function" == typeof n.removeChild && n.attributes instanceof B && "function" == typeof n.removeAttribute && "function" == typeof n.setAttribute && "string" == typeof n.namespaceURI && "function" == typeof n.insertBefore && "function" == typeof n.hasChildNodes) {
                var n = M(t.nodeName);
                if (I("uponSanitizeElement", t, {
                    tagName: n,
                    allowedTags: h
                }), !t.hasChildNodes() || L(t.firstElementChild) || L(t.content) && L(t.content.firstElementChild) || !Ve(/<[/\w]/g, t.innerHTML) || !Ve(/<[/\w]/g, t.textContent)) {
                    if (h[n] && !b[n]) return t instanceof U && !function(e) {
                        let t = a(e);
                        t && t.tagName || (t = {
                            namespaceURI: A,
                            tagName: "template"
                        });
                        var n = xt(e.tagName), o = xt(t.tagName);
                        return Ee[e.namespaceURI] && (e.namespaceURI === S ? t.namespaceURI === N ? "svg" === n : t.namespaceURI === D ? "svg" === n && ("annotation-xml" === o || Ie[o]) : Boolean(O[n]) : e.namespaceURI === D ? t.namespaceURI === N ? "math" === n : t.namespaceURI === S ? "math" === n && He[o] : Boolean(Pe[n]) : e.namespaceURI === N ? (t.namespaceURI !== S || He[o]) && (t.namespaceURI !== D || Ie[o]) && !Pe[n] && (Fe[n] || !O[n]) : "application/xhtml+xml" === _ && Ee[e.namespaceURI]);
                    }(t) || ("noscript" === n || "noembed" === n || "noframes" === n) && Ve(/<\/no(script|embed|frames)/i, t.innerHTML) ? (R(t), 
                    !0) : (y && 3 === t.nodeType && (e = t.textContent, e = We(e, p, " "), 
                    e = We(e, Q, " "), e = We(e, Z, " "), t.textContent !== e && (wt(c.removed, {
                        element: t.cloneNode()
                    }), t.textContent = e)), I("afterSanitizeElements", t, null), 
                    !1);
                    if (!b[n] && Me(n)) {
                        if (v.tagNameCheck instanceof RegExp && Ve(v.tagNameCheck, n)) return;
                        if (v.tagNameCheck instanceof Function && v.tagNameCheck(n)) return;
                    }
                    if (ge && !k[n]) {
                        const r = a(t) || t.parentNode;
                        var o = Y(t) || t.childNodes;
                        if (o && r) for (let e = o.length - 1; 0 <= e; --e) r.insertBefore(j(o[e], !0), $(t));
                    }
                }
            }
            return R(t), 1;
        }
        function Me(e) {
            return 0 < e.indexOf("-");
        }
        function Re(e) {
            let t, n;
            I("beforeSanitizeAttributes", e, null);
            var o = e.attributes;
            if (o) {
                const s = {
                    attrName: "",
                    attrValue: "",
                    keepAttr: !0,
                    allowedAttributes: g
                };
                for (n = o.length; n--; ) {
                    var r, {
                        name: i,
                        namespaceURI: a
                    } = r = o[n];
                    if (t = "value" === i ? r.value : kt(r.value), r = M(i), s.attrName = r, 
                    s.attrValue = t, s.keepAttr = !0, s.forceKeepAttr = void 0, 
                    I("uponSanitizeAttribute", e, s), t = s.attrValue, !s.forceKeepAttr && (ze(i, e), 
                    s.keepAttr)) if (!ue && Ve(/\/>/i, t)) ze(i, e); else {
                        y && (t = We(t, p, " "), t = We(t, Q, " "), t = We(t, Z, " "));
                        var l = M(e.nodeName);
                        if (Ue(l, r, t)) {
                            if (!pe || "id" !== r && "name" !== r || (ze(i, e), 
                            t = he + t), d && "object" == typeof u && "function" == typeof u.getAttributeType && !a) switch (u.getAttributeType(l, r)) {
                              case "TrustedHTML":
                                t = d.createHTML(t);
                                break;

                              case "TrustedScriptURL":
                                t = d.createScriptURL(t);
                            }
                            try {
                                a ? e.setAttributeNS(a, i, t) : e.setAttribute(i, t), 
                                yt(c.removed);
                            } catch (e) {}
                        }
                    }
                }
                I("afterSanitizeAttributes", e, null);
            }
        }
        function Le(e) {
            var t;
            const n = Ae(e);
            for (I("beforeSanitizeShadowDOM", e, null); t = n.nextNode(); ) I("uponSanitizeShadowNode", t, null), 
            _e(t) || (t.content instanceof P && Le(t.content), Re(t));
            I("afterSanitizeShadowDOM", e, null);
        }
        const Oe = i.createElement("form"), Ie = je({}, [ "mi", "mo", "mn", "ms", "mtext" ]), He = je({}, [ "foreignobject", "desc", "title", "annotation-xml" ]), Fe = je({}, [ "title", "style", "font", "a", "script" ]), O = je({}, _t), Pe = (je(O, Mt), 
        je(O, Rt), je({}, Lt)), ze = (je(Pe, Ot), function(e, t) {
            try {
                wt(c.removed, {
                    attribute: t.getAttributeNode(e),
                    from: t
                });
            } catch (e) {
                wt(c.removed, {
                    attribute: null,
                    from: t
                });
            }
            if (t.removeAttribute(e), "is" === e && !g[e]) if (x || T) try {
                R(t);
            } catch (e) {} else try {
                t.setAttribute(e, "");
            } catch (e) {}
        }), I = function(e, t, n) {
            o[e] && bt(o[e], e => {
                e.call(c, t, n, r);
            });
        }, Ue = function(e, t, n) {
            if (me && ("id" === t || "name" === t) && (n in i || n in Oe)) return !1;
            if ((!se || ae[t] || !Ve(J, t)) && (!le || !Ve(ee, t))) if (!g[t] || ae[t]) {
                if (!(Me(e) && (v.tagNameCheck instanceof RegExp && Ve(v.tagNameCheck, e) || v.tagNameCheck instanceof Function && v.tagNameCheck(e)) && (v.attributeNameCheck instanceof RegExp && Ve(v.attributeNameCheck, t) || v.attributeNameCheck instanceof Function && v.attributeNameCheck(t)) || "is" === t && v.allowCustomizedBuiltInElements && (v.tagNameCheck instanceof RegExp && Ve(v.tagNameCheck, n) || v.tagNameCheck instanceof Function && v.tagNameCheck(n)))) return !1;
            } else if (!we[t] && !Ve(oe, We(n, ne, "")) && ("src" !== t && "xlink:href" !== t && "href" !== t || "script" === e || 0 !== Ct(n, "data:") || !be[e]) && (!ce || Ve(te, We(n, ne, ""))) && n) return !1;
            return !0;
        };
        return c.sanitize = function(e) {
            var t, n = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {};
            let o, r;
            if ("string" != typeof (e = (Te = !e) ? "\x3c!--\x3e" : e) && !L(e)) {
                if ("function" != typeof e.toString) throw Dt("toString is not a function");
                if ("string" != typeof (e = e.toString())) throw Dt("dirty is not a string, aborting");
            }
            if (!c.isSupported) return e;
            if (de || Se(n), c.removed = [], C = "string" != typeof e && C) {
                if (e.nodeName) {
                    n = M(e.nodeName);
                    if (!h[n] || b[n]) throw Dt("root node is forbidden and cannot be sanitized in-place");
                }
            } else if (e instanceof s) 1 === (n = (o = Ne("\x3c!----\x3e")).ownerDocument.importNode(e, !0)).nodeType && "BODY" === n.nodeName || "HTML" === n.nodeName ? o = n : o.appendChild(n); else {
                if (!x && !y && !w && -1 === e.indexOf("<")) return d && E ? d.createHTML(e) : e;
                if (!(o = Ne(e))) return x ? null : E ? f : "";
            }
            o && fe && R(o.firstChild);
            const i = Ae(C ? e : o);
            for (;t = i.nextNode(); ) _e(t) || (t.content instanceof P && Le(t.content), 
            Re(t));
            if (C) return e;
            if (x) {
                if (T) for (r = G.call(o.ownerDocument); o.firstChild; ) r.appendChild(o.firstChild); else r = o;
                return r = g.shadowroot || g.shadowrootmode ? K.call(l, r, !0) : r;
            }
            let a = w ? o.outerHTML : o.innerHTML;
            return w && h["!doctype"] && o.ownerDocument && o.ownerDocument.doctype && o.ownerDocument.doctype.name && Ve(Bt, o.ownerDocument.doctype.name) && (a = "<!DOCTYPE " + o.ownerDocument.doctype.name + ">\n" + a), 
            y && (a = We(a, p, " "), a = We(a, Q, " "), a = We(a, Z, " ")), d && E ? d.createHTML(a) : a;
        }, c.setConfig = function(e) {
            Se(e), de = !0;
        }, c.clearConfig = function() {
            r = null, de = !1;
        }, c.isValidAttribute = function(e, t, n) {
            return r || Se({}), e = M(e), t = M(t), Ue(e, t, n);
        }, c.addHook = function(e, t) {
            "function" == typeof t && (o[e] = o[e] || [], wt(o[e], t));
        }, c.removeHook = function(e) {
            if (o[e]) return yt(o[e]);
        }, c.removeHooks = function(e) {
            o[e] && (o[e] = []);
        }, c.removeAllHooks = function() {
            o = {};
        }, c;
    }(), ze = window, Ue = document, jt = /^image\/(p?jpe?g|gif|png|bmp)$/i;
    function $t(e, t) {
        var n;
        f(e, function(e) {
            Ie(e, !0) ? (n || e.nodeType === be ? /\S/.test(e.nodeValue) : !Ae(e, ".sceditor-ignore")) && (n || _e(n = ye("p", {}, t), e), 
            Te(n, e)) : n = null;
        }, !1, !0);
    }
    function $e(r, e) {
        var i, y, u, a, l, s, d, c, w, f, m, p, t, h, g, v, b, H, x, F, P, n, T, z, U, E, C, B, W, V, j, $, Y, q, G, X, K, Q, Z, J, k, ee, te, ne, oe, re, D, ie, S, ae, le, se, ce, N, ue, A, de, o, _ = this, M = {}, R = [], L = {}, fe = {}, O = (_.commands = qe(!0, {}, e.commands || Pe), 
        _.opts = qe(!0, {}, ft, e)), me = (Array.isArray(O.allowedIframeUrls) || (O.allowedIframeUrls = []), 
        O.allowedIframeUrls.push("https://youtube.com/embed/"), O.allowedIframeUrls.push("https://player.vimeo.com/video/"), 
        O.allowedIframeUrls.push("https://www.instagram.com/p/"), O.allowedIframeUrls.push("https://www.facebook.com/plugins/"), 
        Vt());
        function I(e) {
            var t = [ "iframe" ].concat(O.allowedTags), n = [ "allowfullscreen", "frameborder", "target" ].concat(O.allowedAttributes);
            return me.sanitize(e, {
                ADD_TAGS: t,
                ADD_ATTR: n
            });
        }
        me.addHook("uponSanitizeElement", function(e, t) {
            var n = O.allowedIframeUrls;
            if ("iframe" === t.tagName) {
                const o = De(e, "src") || "";
                for (let e = 0; e < n.length; e++) {
                    const r = n[e];
                    if (pe(r) && o.substr(0, r.length) === r) return;
                    if (r.test && r.test(o)) return;
                }
                xe(e);
            }
        }), me.addHook("afterSanitizeAttributes", function(e) {
            "target" in e && De(e, "data-sce-target", De(e, "target")), Se(e, "target");
        }), e = function() {
            r._sceditor = _, O.locale && "en" !== O.locale && V(), _e(y = ye("div", {
                className: "sceditor-container card"
            }), r), Ne(y, "z-index", O.zIndex), P = r.required, r.required = !1;
            const e = $e.formats[O.format];
            i = e ? new e() : {}, g = new mt(_), (O.plugins || "").split(",").forEach(function(e) {
                g.register(e.trim());
            }), "init" in i && i.init.call(_), j(), W(), $(), Y(), gt || _.toggleSourceMode(), 
            D();
            function t() {
                ke(ze, "load", t), O.autofocus && se(!!O.autofocusEnd), o(), S(), 
                g.call("ready"), "onReady" in i && i.onReady.call(_);
            }
            Ce(ze, "load", t), "complete" === Ue.readyState && t();
        }, V = function() {
            var e;
            (t = $e.locale[O.locale]) || (e = O.locale.split("-"), t = $e.locale[e[0]]), 
            t && t.dateFormat && (O.dateFormat = t.dateFormat);
        }, W = function() {
            c = ye("textarea"), a = ye("iframe", {
                frameborder: 0,
                allowfullscreen: !0
            }), Re(w = ye("div"), "card-footer"), Re(w, "text-body-secondary"), 
            Re(w, "text-end"), Re(w, "small"), Re(w, "p-2"), w.appendChild(ot(_._("Characters remaining:") + '<span id="editor-Counter" class="badge bg-secondary ms-1"></span>')), 
            O.startInSourceMode ? (Re(y, "sourceMode"), Xe(a)) : (Re(y, "wysiwygMode"), 
            Xe(c)), O.spellcheck || De(y, "spellcheck", "false"), "https:" === ze.location.protocol && De(a, "src", "about:blank"), 
            De(c, "title", "source"), Te(y, a), Te(y, c), Te(y, w), _.dimensions(O.width || Je(r), O.height || Oe(r)), 
            (d = a.contentDocument).open();
            var t = "", e = (O.styles.forEach(e => {
                t += Fe("style", {
                    style: e
                });
            }), d.write(Fe("html", {
                spellcheck: O.spellcheck ? "" : 'spellcheck="false"',
                charset: O.charset,
                themeMode: O.themeMode,
                styles: t
            })), d.close(), s = d.body, l = a.contentWindow, _.readOnly(!!O.readOnly), 
            ht && (Oe(s, "100%"), Ce(s, "touchend", _.focus)), De(r, "tabindex")), e = (De(c, "tabindex", e), 
            De(a, "tabindex", e), h = new pt(l, null, I), Xe(r), _.val(r.value), 
            O.placeholder || De(r, "placeholder"));
            e && (c.placeholder = e, De(s, "placeholder", e));
        }, $ = function() {
            O.autoUpdate && (Ce(s, "blur", de), Ce(c, "blur", de)), null === O.rtl && (O.rtl = "rtl" === Ne(c, "direction")), 
            _.rtl(!!O.rtl), O.autoExpand && (Ce(s, "load", o, !0), Ce(s, "input keyup", o)), 
            O.resizeEnabled && q(), De(y, "id", O.id);
        }, Y = function() {
            var e = r.form, t = "compositionstart compositionend", n = "keydown keyup keypress focus blur contextmenu input", o = "onselectionchange" in d ? "selectionchange" : "keyup focus blur contextmenu mouseup touchend click";
            Ce(Ue, "click", oe), e && (Ce(e, "reset", k), Ce(e, "submit", _.updateOriginal, !0)), 
            Ce(window, "pagehide", _.updateOriginal), Ce(window, "pageshow", k), 
            Ce(s, "keypress", J), Ce(s, "keydown", Q), Ce(s, "keydown", Z), Ce(s, "keyup", S), 
            Ce(s, "blur", ue), Ce(s, "keyup", A), Ce(s, "paste", G), Ce(s, "cut copy", X), 
            Ce(s, t, te), Ce(s, o, ae), Ce(s, n, ne), Ce(s, "blur", function() {
                _.val() || Re(s, "placeholder");
            }), Ce(s, "focus", function() {
                Ze(s, "placeholder");
            }), Ce(c, "blur", ue), Ce(c, "keyup", A), Ce(c, "keydown", Q), Ce(c, t, te), 
            Ce(c, n, ne), Ce(d, "mousedown", ee), Ce(d, o, ae), Ce(d, "keyup", S), 
            Ce(y, "selectionchanged", le), Ce(y, "selectionchanged", D), Ce(y, "selectionchanged valuechanged nodechanged pasteraw paste", ne);
        }, j = function() {
            var i, a = _.commands, l = (O.toolbarExclude || "").split(","), e = O.toolbar.split("|");
            u = ye("div", {
                className: "card-header btn-toolbar",
                unselectable: "on"
            }), O.icons in $e.icons && (C = new $e.icons[O.icons]()), ge(e, function(e, t) {
                i = ye("div", {
                    className: "btn-group btn-group-sm m-1"
                }), ge(t.split(","), function(e, t) {
                    var n, o, r = a[t];
                    !r || -1 < l.indexOf(t) || (n = r.shortcut, o = Fe("toolbarButton", {
                        name: t
                    }, !0).firstChild, "source" === t ? o.classList.add("btn-secondary") : o.classList.add("btn-primary"), 
                    C && C.create && C.create(t) && _e(C.create(t), o.firstChild), 
                    o._sceTxtMode = !!r.txtExec, o._sceWysiwygMode = !!r.exec, Le(o, "disabled", !r.exec), 
                    Ce(o, "click", function(e) {
                        Me(o, "disabled") || B(o, r), D(), e.preventDefault();
                    }), Ce(o, "mousedown", function(e) {
                        _.closeDropDown(), e.preventDefault();
                    }), r.tooltip && De(o, "title", _._(r.tooltip) + (n ? " (" + n + ")" : "")), 
                    n && _.addShortcut(n, t), r.state ? R.push({
                        name: t,
                        state: r.state
                    }) : pe(r.exec) && R.push({
                        name: t,
                        state: r.exec
                    }), Te(i, o), fe[t] = o);
                }), i.firstChild && Te(u, i);
            }), Te(O.toolbarContainer || y, u);
        }, q = function() {
            var e = ye("div", {
                className: "sceditor-grip"
            }), t = "touchmove mousemove", n = "touchcancel touchend mouseup", o = 0, r = 0, i = 0, a = 0, l = 0, s = 0, c = Je(y), u = Oe(y), d = !1, f = _.rtl(), m = O.resizeMinHeight || u / 1.5, p = O.resizeMaxHeight || 2.5 * u, h = O.resizeMinWidth || c / 1.25, g = O.resizeMaxWidth || 1.25 * c, v = function(e) {
                a = ("touchmove" === e.type ? (e = ze.event, i = e.changedTouches[0].pageX, 
                e.changedTouches[0]) : (i = e.pageX, e)).pageY;
                var t = s + (a - r), n = f ? l - (i - o) : l + (i - o);
                0 < g && g < n && (n = g), 0 < h && n < h && (n = h), O.resizeWidth || (n = !1), 
                0 < p && p < t && (t = p), 0 < m && t < m && (t = m), O.resizeHeight || (t = !1), 
                (n || t) && _.dimensions(n, t), e.preventDefault();
            }, b = function(e) {
                d && (d = !1, Ze(y, "resizing"), ke(Ue, t, v), ke(Ue, n, b), e.preventDefault());
            };
            C && C.create && ((u = C.create("grip")) && Te(e, u)), Te(y, w), Te(y, e), 
            Ce(e, "touchstart mousedown", function(e) {
                r = ("touchstart" === e.type ? (e = ze.event, o = e.touches[0].pageX, 
                e.touches[0]) : (o = e.pageX, e)).pageY, l = Je(y), s = Oe(y), d = !0, 
                Re(y, "resizing"), Ce(Ue, t, v), Ce(Ue, n, b), e.preventDefault();
            });
        }, se = function(e) {
            var t, n = s.firstChild;
            if (tt(y)) if (_.sourceMode()) t = e ? c.value.length : 0, c.setSelectionRange(t, t); else {
                if (st(s), e) for ((n = s.lastChild) || (n = ye("p", {}, d), Te(s, n)); n.lastChild; ) Ae(n = n.lastChild, "br") && n.previousSibling && (n = n.previousSibling);
                t = d.createRange(), at(n) ? t.selectNodeContents(n) : (t.setStartBefore(n), 
                e && t.setStartAfter(n)), t.collapse(!e), h.selectRange(t), x = t, 
                e && (s.scrollTop = s.scrollHeight), _.focus();
            }
        }, _.readOnly = function(e) {
            return "boolean" != typeof e ? !c.readonly : (s.contentEditable = !e, 
            c.readonly = !e, re(e), _);
        }, _.rtl = function(e) {
            var t = e ? "rtl" : "ltr";
            return "boolean" != typeof e ? "rtl" === De(c, "dir") : (De(s, "dir", t), 
            De(c, "dir", t), Ze(y, "rtl"), Ze(y, "ltr"), Re(y, t), C && C.rtl && C.rtl(e), 
            _);
        }, re = function(n) {
            var o = _.inSourceMode() ? "_sceTxtMode" : "_sceWysiwygMode";
            ge(fe, function(e, t) {
                Le(t, "disabled", n || !t[o]);
            });
        }, _.width = function(e, t) {
            return e || 0 === e ? (_.dimensions(e, null, t), _) : Je(y);
        }, _.dimensions = function(e, t, n) {
            return t = !(!t && 0 !== t) && t, !1 === (e = !(!e && 0 !== e) && e) && !1 === t ? {
                width: _.width(),
                height: _.height()
            } : (!1 !== e && (!1 !== n && (O.width = e), Je(y, e)), !1 !== t && (!1 !== n && (O.height = t), 
            Oe(y, t)), _);
        }, _.height = function(e, t) {
            return e || 0 === e ? (_.dimensions(null, e, t), _) : Oe(y);
        }, _.maximize = function(e) {
            var t = "sceditor-maximize";
            return Ye(e) ? Me(y, t) : ((e = !!e) && (U = ze.scrollY), Le(Ue.documentElement, t, e), 
            Le(Ue.body, t, e), Le(y, t, e), _.width(e ? "100%" : O.width, !1), _.height(e ? "100%" : O.height, !1), 
            e || ze.scrollTo(0, U), o(), _);
        }, o = function() {
            O.autoExpand && !z && (z = setTimeout(_.expandToContent, 200));
        }, _.expandToContent = function(e) {
            if (!_.maximize()) {
                clearTimeout(z), z = !1, T || (t = O.resizeMinHeight || O.height || Oe(r), 
                T = {
                    min: t,
                    max: O.resizeMaxHeight || 2 * t
                });
                const o = Ue.createRange();
                o.selectNodeContents(s);
                var t = o.getBoundingClientRect(), n = d.documentElement.clientHeight - 1, t = t.bottom - t.top, t = _.height() + 1 + (t - n);
                e || -1 === T.max || (t = Math.min(t, T.max)), _.height(Math.ceil(Math.max(t, T.min)));
            }
        }, _.destroy = function() {
            var e;
            g && (g.destroy(), g = h = null, f && xe(f), ke(Ue, "click", oe), (e = r.form) && (ke(e, "reset", k), 
            ke(e, "submit", _.updateOriginal, !0)), ke(window, "pagehide", _.updateOriginal), 
            ke(window, "pageshow", k), xe(c), xe(u), xe(y), delete r._sceditor, 
            Ke(r), r.required = P);
        }, _.createDropDown = function(e, t, n) {
            t = "sceditor-" + t;
            if (_.closeDropDown(), (!f || !Me(f, t)) && (e = qe({
                top: e.offsetTop,
                left: e.parentElement.offsetLeft + e.offsetLeft,
                marginTop: e.clientHeight
            }, O.dropDownCss), Ne(f = ye("div", {
                className: "dropdown-menu show sceditor-dropdown " + t
            }), e), Te(f, n), Te(y, f), Ce(f, "click focusin", function(e) {
                e.stopPropagation();
            }), f)) {
                const o = Ee(f, "input,textarea")[0];
                o && o.focus();
            }
        }, oe = function(e) {
            3 !== e.which && f && !e.defaultPrevented && (de(), _.closeDropDown());
        }, X = function(n) {
            const o = h.selectedRange();
            if (o) {
                var r, i = ye("div", {}, d);
                let e, t = o.commonAncestorContainer;
                for (;t && Ie(t, !0); ) t.nodeType === ve && (r = t.cloneNode(), 
                i.firstChild && Te(r, i.firstChild), Te(i, r), e = e || r), t = t.parentNode;
                Te(e || i, o.cloneContents()), st(i), n.clipboardData.setData("text/html", i.innerHTML), 
                ge(Ee(i, "p"), function(e, t) {
                    it(t, "div");
                }), ge(Ee(i, "br"), function(e, t) {
                    t.nextSibling && Ie(t.nextSibling, !0) || xe(t);
                }), Te(s, i), n.clipboardData.setData("text/plain", i.innerText), 
                xe(i), "cut" === n.type && o.deleteContents(), n.preventDefault();
            }
        }, G = function(e) {
            var t = s;
            const n = e.clipboardData;
            if (n) {
                const r = {}, i = n.types, a = n.items;
                e.preventDefault();
                for (let e = 0; e < i.length; e++) {
                    if (i.indexOf("text/html") < 0 && ze.FileReader && a && jt.test(a[e].type)) return void g.call("pasteHtml", a[e].getAsFile());
                    r[i[e]] = n.getData(i[e]);
                }
                r.text = r["text/plain"], r.html = I(r["text/html"]), K(r);
            } else if (!E) {
                var o = t.scrollTop;
                for (h.saveRange(), E = Ue.createDocumentFragment(); t.firstChild; ) Te(E, t.firstChild);
                setTimeout(function() {
                    var e = t.innerHTML;
                    t.innerHTML = "", Te(t, E), t.scrollTop = o, E = !1, h.restoreRange(), 
                    K({
                        html: I(e)
                    });
                }, 0);
            }
        }, K = function(e) {
            const t = ye("div", {}, d), n = (g.call("pasteRaw", e), et(y, "pasteraw", e), 
            e.html ? (t.innerHTML = I(e.html), lt(t)) : t.innerHTML = He(e.text || ""), 
            {
                val: t.innerHTML
            });
            "fragmentToSource" in i && (n.val = i.fragmentToSource(n.val, d, v)), 
            g.call("paste", n), et(y, "paste", n), "fragmentToHtml" in i && (n.val = i.fragmentToHtml(n.val, v)), 
            g.call("pasteHtml", n);
            e = h.getFirstBlockParent();
            _.wysiwygEditorInsertHtml(n.val, null, !0), function e(t) {
                if (t.nodeType === ve) {
                    for (var n = t.parentNode, o = t.tagName, r = t.childNodes.length; r--; ) e(t.childNodes[r]);
                    if (Ie(t) && "BR" !== o) {
                        for (r = t.style.length; r--; ) {
                            var i = t.style[r];
                            Ne(n, i) === Ne(t, i) && t.style.removeProperty(i);
                        }
                        if (!t.style.length) if (Se(t, "style"), "FONT" === o && (Ne(t, "fontFamily").toLowerCase() === Ne(n, "fontFamily").toLowerCase() && Se(t, "face"), 
                        Ne(t, "color") === Ne(n, "color") && Se(t, "color"), Ne(t, "fontSize") === Ne(n, "fontSize") && Se(t, "size")), 
                        !t.attributes.length && /SPAN|FONT/.test(o)) dt(t); else if (/B|STRONG|EM|SPAN|FONT/.test(o)) for (var a = /B|STRONG/.test(o), l = "EM" === o; n && Ie(n) && (!a || /bold|700/i.test(Ne(n, "fontWeight"))) && (!l || "italic" === Ne(n, "fontStyle")); ) {
                            if ((n.tagName === o || a && /B|STRONG/.test(n.tagName)) && ut(n, t)) {
                                dt(t);
                                break;
                            }
                            n = n.parentNode;
                        }
                        var s = t.nextSibling;
                        s && s.tagName === o && ut(s, t) && (Te(t, s), dt(s));
                    }
                }
            }(e);
        }, _.closeDropDown = function(e) {
            f && (xe(f), f = null), !0 === e && _.focus();
        }, _.wysiwygEditorInsertHtml = function(e, t, n) {
            var o = Oe(a);
            _.focus(), !n && we(b, "code") || (h.insertHTML(e, t), h.saveRange(), 
            lt(s), $t(s, d), Ke(n = Ee(s, "#sceditor-end-marker")[0]), e = s.scrollTop, 
            t = ct(n).top + 1.5 * n.offsetHeight - o, Xe(n), (e < t || t + o < e) && (s.scrollTop = t), 
            N(!1), h.restoreRange(), S());
        }, _.wysiwygEditorInsertText = function(e, t) {
            _.wysiwygEditorInsertHtml(He(e), He(t));
        }, _.insertText = function(e, t) {
            return _.inSourceMode() ? _.sourceEditorInsertText(e, t) : _.wysiwygEditorInsertText(e, t), 
            _;
        }, _.sourceEditorInsertText = function(e, t) {
            var n, o = c.selectionStart, r = c.selectionEnd, i = c.scrollTop;
            c.focus(), n = c.value, t && (e += n.substring(o, r) + t), c.value = n.substring(0, o) + e + n.substring(r, n.length), 
            c.selectionStart = o + e.length - (t ? t.length : 0), c.selectionEnd = c.selectionStart, 
            c.scrollTop = i, c.focus(), N();
        }, _.getRangeHelper = function() {
            return h;
        }, _.sourceEditorCaret = function(e) {
            return c.focus(), e ? (c.selectionStart = e.start, c.selectionEnd = e.end, 
            this) : {
                start: c.selectionStart,
                end: c.selectionEnd
            };
        }, _.val = function(e, t) {
            return pe(e) ? (_.inSourceMode() ? _.setSourceEditorValue(e) : (!1 !== t && "toHtml" in i && (e = i.toHtml(e)), 
            _.setWysiwygEditorValue(e)), _) : _.inSourceMode() ? _.getSourceEditorValue(!1) : _.getWysiwygEditorValue(t);
        }, _.insert = function(t, n, o, e, r) {
            if (_.inSourceMode()) _.sourceEditorInsertText(t, n); else {
                if (n) {
                    let e = h.selectedHtml();
                    t += (e = !1 !== o && "fragmentToSource" in i ? i.fragmentToSource(e, d, v) : e) + n;
                }
                !1 !== o && "fragmentToHtml" in i && (t = i.fragmentToHtml(t, v)), 
                !1 !== o && !0 === r && (t = t.replace(/&lt;/g, "<").replace(/&gt;/g, ">").replace(/&amp;/g, "&")), 
                _.wysiwygEditorInsertHtml(t);
            }
            return _;
        }, _.getWysiwygEditorValue = function(e) {
            var t, n = ye("div", {}, d);
            const o = s.childNodes;
            for (let e = 0; e < o.length; e++) Te(n, o[e].cloneNode(!0));
            return Te(s, n), lt(n), xe(n), t = n.innerHTML, t = !1 !== e && i.hasOwnProperty("toSource") ? i.toSource(t, d) : t;
        }, _.getBody = function() {
            return s;
        }, _.getContentAreaContainer = function() {
            return a;
        }, _.getSourceEditorValue = function(e) {
            var t = c.value;
            return t = !1 !== e && "toHtml" in i ? i.toHtml(t) : t;
        }, _.getSourceEditor = function() {
            return c;
        }, _.setWysiwygEditorValue = function(e) {
            s.innerHTML = I(e = e || "<p><br /></p>"), S(), N(), o();
        }, _.setSourceEditorValue = function(e) {
            c.value = e, N();
        }, _.updateOriginal = function() {
            r.value = _.val();
        }, _.inSourceMode = function() {
            return Me(y, "sourceMode");
        }, _.sourceMode = function(e) {
            var t = _.inSourceMode();
            return "boolean" != typeof e ? t : ((t && !e || !t && e) && _.toggleSourceMode(), 
            _);
        }, _.toggleSourceMode = function() {
            var e = _.inSourceMode();
            !gt && e || (e || (h.saveRange(), h.clear()), x = null, _.blur(), e ? _.setWysiwygEditorValue(_.getSourceEditorValue()) : _.setSourceEditorValue(_.getWysiwygEditorValue()), 
            Qe(c), Qe(a), Le(y, "wysiwygMode", e), Le(y, "sourceMode", !e), re(), 
            D(), void 0 !== _.opts.onToggleMode && _.opts.onToggleMode(_));
        }, ie = function() {
            return c.focus(), c.value.substring(c.selectionStart, c.selectionEnd);
        }, B = function(e, t) {
            _.inSourceMode() ? t.txtExec && (Array.isArray(t.txtExec) ? _.sourceEditorInsertText.apply(_, t.txtExec) : t.txtExec.call(_, e, ie())) : t.exec && (he(t.exec) ? t.exec.call(_, e) : _.execCommand(t.exec, t.hasOwnProperty("execParam") ? t.execParam : null));
        }, _.execCommand = function(e, t) {
            var n = !1, o = _.commands[e];
            if (_.focus(), !we(h.parentNode(), "code")) {
                try {
                    n = d.execCommand(e, !1, t);
                } catch (e) {}
                !n && o && o.errorMessage && alert(_._(o.errorMessage)), D();
            }
        }, ae = function() {
            function e() {
                if (l.getSelection() && l.getSelection().rangeCount <= 0) x = null; else if (h && !h.compare(x)) {
                    if ((x = h.cloneSelected()) && x.collapsed) {
                        let e = x.startContainer;
                        var t = x.startOffset;
                        for (t && e.nodeType !== be && (e = e.childNodes[t]); e && e.parentNode !== s; ) e = e.parentNode;
                        e && Ie(e, !0) && (h.saveRange(), $t(s, d), h.restoreRange());
                    }
                    et(y, "selectionchanged");
                }
                F = !1;
            }
            F || (F = !0, "onselectionchange" in d ? e() : setTimeout(e, 100));
        }, le = function() {
            var e, t = h.parentNode();
            v !== t && (e = v, v = t, b = h.getFirstBlockParent(t), et(y, "nodechanged", {
                oldNode: e,
                newNode: v
            })), H && (b.querySelectorAll("span[style]").forEach(e => {
                e && (e.outerHTML = e.innerHTML);
            }), H = !1);
        }, _.currentNode = function() {
            return v;
        }, _.currentBlockNode = function() {
            return b;
        }, D = function() {
            var n, o, r = "active";
            const i = d;
            var a = _.sourceMode();
            if (_.readOnly()) ge(Ee(u, r), function(e, t) {
                Ze(t, r);
            }); else {
                a || (o = h.parentNode(), n = h.getFirstBlockParent(o));
                for (let t = 0; t < R.length; t++) {
                    let e = 0;
                    var l = fe[R[t].name];
                    const c = R[t].state;
                    var s = a && !l._sceTxtMode || !a && !l._sceWysiwygMode;
                    if (pe(c)) {
                        if (!a) try {
                            -1 < (e = i.queryCommandEnabled(c) ? 0 : -1) && (e = i.queryCommandState(c) ? 1 : 0);
                        } catch (e) {}
                    } else s || (e = c.call(_, o, n));
                    Le(l, "disabled", s || e < 0), Le(l, r, 0 < e);
                }
                C && C.update && C.update(a, o, n);
            }
        }, J = function(t) {
            if (!t.defaultPrevented && (_.closeDropDown(), 13 === t.which)) if (!Ae(b, "li,ul,ol") && rt(b)) {
                var n = ye("br", {}, d), o = (h.insertNode(n), n.parentNode);
                let e = o.lastChild;
                e && e.nodeType === be && "" === e.nodeValue && (xe(e), e = o.lastChild), 
                !Ie(o, !0) && e === n && Ie(n.previousSibling) && h.insertHTML("<br>"), 
                t.preventDefault();
            }
        }, S = function() {
            nt(s, function(e) {
                if (e.nodeType === ve && !/inline/.test(Ne(e, "display")) && !Ae(e, ".sceditor-nlf") && rt(e)) {
                    const t = ye("p", {}, d);
                    return t.className = "sceditor-nlf", t.innerHTML = "<br />", 
                    Te(s, t), !1;
                }
                if (3 === e.nodeType && !/^\s*$/.test(e.nodeValue) || Ae(e, "br")) return !1;
            });
        }, k = function() {
            _.val(r.value);
        }, ee = function() {
            _.closeDropDown();
        }, _._ = function() {
            var n = arguments;
            return t && t[n[0]] && (n[0] = t[n[0]]), n[0].replace(/\{(\d+)\}/g, function(e, t) {
                return void 0 !== n[+t + 1] ? n[+t + 1] : `{${t}}`;
            });
        }, ne = function(t) {
            g && g.call(t.type + "Event", t, _);
            var e = (t.target === c ? "scesrc" : "scewys") + t.type;
            M[e] && M[e].forEach(function(e) {
                e.call(_, t);
            });
        }, _.bind = function(e, t, n, o) {
            for (var r, i, a = (e = e.split(" ")).length; a--; ) he(t) && (r = "scewys" + e[a], 
            i = "scesrc" + e[a], n || (M[r] = M[r] || [], M[r].push(t)), o || (M[i] = M[i] || [], 
            M[i].push(t)), "valuechanged" === e[a] && (N.hasHandler = !0));
            return _;
        }, _.unbind = function(e, t, n, o) {
            for (var r = (e = e.split(" ")).length; r--; ) he(t) && (n || Ge(M["scewys" + e[r]] || [], t), 
            o || Ge(M["scesrc" + e[r]] || [], t));
            return _;
        }, _.blur = function(e, t, n) {
            return he(e) ? _.bind("blur", e, t, n) : (_.sourceMode() ? c : s).blur(), 
            _;
        }, _.focus = function(e, t, n) {
            if (he(e)) _.bind("focus", e, t, n); else if (_.inSourceMode()) c.focus(); else {
                if (Ee(d, ":focus").length) return;
                const o = h.selectedRange();
                x || se(!0), o && 1 === o.endOffset && o.collapsed && ((e = o.endContainer) && 1 === e.childNodes.length && Ae(e.firstChild, "br") && (o.setStartBefore(e.firstChild), 
                o.collapse(!0), h.selectRange(o))), l.focus(), s.focus();
            }
            return D(), _;
        }, _.keyDown = function(e, t, n) {
            return _.bind("keydown", e, t, n);
        }, _.keyPress = function(e, t, n) {
            return _.bind("keypress", e, t, n);
        }, _.keyUp = function(e, t, n) {
            return _.bind("keyup", e, t, n);
        }, _.nodeChanged = function(e) {
            return _.bind("nodechanged", e, !1, !0);
        }, _.selectionChanged = function(e) {
            return _.bind("selectionchanged", e, !1, !0);
        }, _.valueChanged = function(e, t, n) {
            return _.bind("valuechanged", e, t, n);
        }, _.css = function(e) {
            return n || (n = ye("style", {
                id: "inline"
            }, d), Te(d.head, n)), pe(e) ? (n.styleSheet ? n.styleSheet.cssText = e : n.innerHTML = e, 
            _) : n.styleSheet ? n.styleSheet.cssText : n.innerHTML;
        }, Q = function(e) {
            var t = [], n = {
                "`": "~",
                1: "!",
                2: "@",
                3: "#",
                4: "$",
                5: "%",
                6: "^",
                7: "&",
                8: "*",
                9: "(",
                0: ")",
                "-": "_",
                "=": "+",
                ";": ": ",
                "'": '"',
                ",": "<",
                ".": ">",
                "/": "?",
                "\\": "|",
                "[": "{",
                "]": "}"
            }, o = {
                109: "-",
                110: "del",
                111: "/",
                96: "0",
                97: "1",
                98: "2",
                99: "3",
                100: "4",
                101: "5",
                102: "6",
                103: "7",
                104: "8",
                105: "9"
            }, r = e.which, i = {
                8: "backspace",
                9: "tab",
                13: "enter",
                19: "pause",
                20: "capslock",
                27: "esc",
                32: "space",
                33: "pageup",
                34: "pagedown",
                35: "end",
                36: "home",
                37: "left",
                38: "up",
                39: "right",
                40: "down",
                45: "insert",
                46: "del",
                91: "win",
                92: "win",
                93: "select",
                96: "0",
                97: "1",
                98: "2",
                99: "3",
                100: "4",
                101: "5",
                102: "6",
                103: "7",
                104: "8",
                105: "9",
                106: "*",
                107: "+",
                109: "-",
                110: ".",
                111: "/",
                112: "f1",
                113: "f2",
                114: "f3",
                115: "f4",
                116: "f5",
                117: "f6",
                118: "f7",
                119: "f8",
                120: "f9",
                121: "f10",
                122: "f11",
                123: "f12",
                144: "numlock",
                145: "scrolllock",
                186: ";",
                187: "=",
                188: ",",
                189: "-",
                190: ".",
                191: "/",
                192: "`",
                219: "[",
                220: "\\",
                221: "]",
                222: "'"
            }[r] || String.fromCharCode(r).toLowerCase();
            if ((e.ctrlKey || e.metaKey) && t.push("ctrl"), e.altKey && t.push("alt"), 
            e.shiftKey && (t.push("shift"), o[r] ? i = o[r] : n[i] && (i = n[i])), 
            i && (r < 16 || 18 < r) && t.push(i), t = t.join("+"), L[t] && !1 === L[t].call(_) && (e.stopPropagation(), 
            e.preventDefault()), "]" === e.key && _.inSourceMode()) {
                o = c, n = o.selectionStart;
                const a = o.value.slice(0, n);
                r = o.value.slice(o.selectionEnd, o.value.length);
                let e;
                try {
                    e = a.match(/\[([^\]]+)$/)[1].match(/^([a-z1-6]+)/)[1];
                } catch (e) {}
                -1 < [ "b", "i", "u", "h", "code", "img", "quote", "left", "center", "right", "indent", "list", "color", "size", "albumimg", "attach", "youtube", "vimeo", "instagram", "twitter", "facebook", "googlewidget", "spoiler", "userlink", "googlemaps", "hide", "group-hide", "hide-thanks", "hide-reply-thanks", "hide-reply", "hide-posts", "dailymotion", "audio", "media" ].indexOf(e) && (i = `[/${e}]`, 
                o.value = a + i + r, o.selectionStart = o.selectionEnd = n, o.focus());
            }
        }, _.addShortcut = function(e, t) {
            return e = e.toLowerCase(), pe(t) ? L[e] = function() {
                return B(fe[t], _.commands[t]), !1;
            } : L[e] = t, _;
        }, _.removeShortcut = function(e) {
            return delete L[e.toLowerCase()], _;
        }, Z = function(e) {
            var t, n, o;
            if (8 === e.which && (H = !0, !O.disableBlockRemove && (n = h.selectedRange()) && (t = n.startContainer, 
            0 === n.startOffset && (o = ce()) && !Ae(o, "body")))) {
                for (;t !== o; ) {
                    for (;t.previousSibling; ) if ((t = t.previousSibling).nodeType !== be || t.nodeValue) return;
                    if (!(t = t.parentNode)) return;
                }
                _.clearBlockFormatting(o), e.preventDefault();
            }
        }, ce = function() {
            for (var e = b; !rt(e) || Ie(e, !0); ) if (!(e = e.parentNode) || Ae(e, "body")) return;
            return e;
        }, _.clearBlockFormatting = function(e) {
            return (e = e || ce()) && !Ae(e, "body") && (h.saveRange(), e.className = "", 
            De(e, "style", ""), Ae(e, "p,div,td") || it(e, "p"), h.restoreRange()), 
            _;
        }, N = function(e) {
            var t, n, o;
            g && (g.hasHandler("valuechangedEvent") || N.hasHandler) && (o = !(n = _.sourceMode()) && h.hasSelection(), 
            e = (m = !1) !== e && !d.getElementById("sceditor-start-marker"), p && (clearTimeout(p), 
            p = !1), o && e && h.saveRange(), (t = n ? c.value : s.innerHTML) !== N.lastVal && (N.lastVal = t, 
            et(y, "valuechanged", {
                rawValue: n ? _.val() : t
            })), o && e && h.removeMarkers());
        }, ue = function() {
            p && N();
        }, A = function(e) {
            var e = e.which, t = A.lastChar, n = 13 === t || 32 === t, t = 8 === t || 46 === t;
            A.lastChar = e, m || (13 === e || 32 === e ? n ? A.triggerNext = !0 : N() : 8 === e || 46 === e ? t ? A.triggerNext = !0 : N() : A.triggerNext && (N(), 
            A.triggerNext = !1), clearTimeout(p), p = setTimeout(function() {
                m || N();
            }, 1500));
        }, te = function(e) {
            (m = /start/i.test(e.type)) || N();
        }, de = function() {
            _.updateOriginal();
        }, e();
    }
    $e.locale = {}, $e.formats = {}, $e.icons = {}, $e.command = {
        get: function(e) {
            return Pe[e] || null;
        },
        set: function(e, t) {
            return !(!e || !t) && ((t = qe(Pe[e] || {}, t)).remove = function() {
                $e.command.remove(e);
            }, Pe[e] = t, this);
        },
        remove: function(e) {
            return Pe[e] && delete Pe[e], this;
        }
    }, window.sceditor = {
        command: $e.command,
        commands: Pe,
        defaultOptions: ft,
        ios: ht,
        isWysiwygSupported: gt,
        regexEscape: y,
        escapeEntities: He,
        escapeUriScheme: function(e) {
            const t = window.location;
            if (!e || !/^[^\/]*:/i.test(e) || b.test(e)) return e;
            const n = t.pathname.split("/");
            return n.pop(), t.protocol + "//" + t.host + n.join("/") + "/" + e;
        },
        dom: {
            css: Ne,
            attr: De,
            removeAttr: Se,
            is: Ae,
            closest: we,
            width: Je,
            height: Oe,
            traverse: f,
            rTraverse: nt,
            parseHTML: ot,
            hasStyling: rt,
            convertElement: it,
            blockLevelList: m,
            canHaveChildren: at,
            isInline: Ie,
            copyCSS: function(e, t) {
                t.style && e.style && (t.style.cssText = e.style.cssText + t.style.cssText);
            },
            fixNesting: lt,
            findCommonAncestor: function(e, t) {
                for (;e = e.parentNode; ) if ((n = e) !== (o = t) && n.contains && n.contains(o)) return e;
                var n, o;
            },
            getSibling: h,
            removeWhiteSpace: st,
            extractContents: g,
            getOffset: ct,
            getStyle: v,
            hasStyle: function(e, t, n) {
                return !!(e = v(e, t)) && (!n || e === n || Array.isArray(n) && -1 < n.indexOf(e));
            }
        },
        locale: $e.locale,
        icons: $e.icons,
        utils: {
            each: ge,
            isEmptyObject: n,
            extend: qe
        },
        plugins: mt.plugins,
        formats: $e.formats,
        create: function(e, t) {
            t = t || {}, c(e, ".sceditor-container") || (t.runWithoutWysiwygSupport || gt) && new $e(e, t);
        },
        instance: function(e) {
            return e._sceditor;
        }
    };
}();

!function(t) {
    "use strict";
    var l, f = t.escapeEntities, r = t.escapeUriScheme, h = t.dom, e = t.utils, p = h.css, s = h.attr, g = h.is, n = e.extend, b = e.each, i = t.command.get, v = {
        always: 1,
        never: 2,
        auto: 3
    }, o = {
        bold: {
            txtExec: [ "[b]", "[/b]" ]
        },
        italic: {
            txtExec: [ "[i]", "[/i]" ]
        },
        underline: {
            txtExec: [ "[u]", "[/u]" ]
        },
        strike: {
            txtExec: [ "[s]", "[/s]" ]
        },
        mark: {
            txtExec: [ "[h]", "[/h]" ]
        },
        left: {
            txtExec: [ "[left]", "[/left]" ]
        },
        center: {
            txtExec: [ "[center]", "[/center]" ]
        },
        right: {
            txtExec: [ "[right]", "[/right]" ]
        },
        justify: {
            txtExec: [ "[justify]", "[/justify]" ]
        },
        font: {
            txtExec: function(t) {
                var e = this;
                i("font")._dropDown(e, t, function(t) {
                    e.insertText(`[font=${t}]`, "[/font]");
                });
            }
        },
        size: {
            txtExec: function(t) {
                var e = this;
                i("size")._dropDown(e, t, function(t) {
                    e.insertText(`[size=${t}]`, "[/size]");
                });
            }
        },
        color: {
            txtExec: function(t) {
                var e = this;
                i("color")._dropDown(e, t, function(t) {
                    e.insertText(`[color=${t}]`, "[/color]");
                });
            }
        },
        bulletlist: {
            txtExec: function(t, e) {
                this.insertText(`[list]
[list]${e.split(/\r?\n/).join("[/li]\n[li]")}[/li]
[/ul]`);
            }
        },
        orderedlist: {
            txtExec: function(t, e) {
                this.insertText(`[list=I]
[li]${e.split(/\r?\n/).join("[/li]\n[li]")}[/li]
[/list]`);
            }
        },
        table: {
            txtExec: [ "[table][tr][td]", "[/td][/tr][/table]" ]
        },
        code: {
            txtExec: function(t) {
                var e = this;
                i("code")._dropDown(e, t, function(t) {
                    e.insertText(`[code=${t}]`, "[/code]");
                });
            }
        },
        extensions: {
            txtExec: function(t) {
                var e = this;
                i("extensions")._dropDown(e, t, function(t) {
                    e.insertText(`[${t}]`, `[/${t}]`);
                });
            }
        },
        image: {
            txtExec: function(t, n) {
                var r = this;
                i("image")._dropDown(r, t, function(t, e) {
                    e || n ? r.insertText(`[img=${t}]${e || n || t}[/img]`) : r.insertText(`[img]${t}[/img]`);
                });
            }
        },
        email: {
            txtExec: function(t, n) {
                var r = this;
                i("email")._dropDown(r, t, function(t, e) {
                    r.insertText(`[email=${t}]${e || n || t}[/email]`);
                });
            }
        },
        link: {
            txtExec: function(t, n) {
                var r = this;
                i("link")._dropDown(r, t, function(t, e) {
                    n || e ? r.insertText(`[url=${t}]${e || n || t}[/url]`) : r.insertText(`[url]${t}[/url]`);
                });
            }
        },
        quote: {
            txtExec: [ "[quote]", "[/quote]" ]
        },
        userlink: {
            txtExec: [ "[userlink]", "[/userlink]" ]
        },
        albums: {
            txtExec: function(t) {
                var e = this;
                i("albums")._dropDown(e, t, function(t) {
                    e.insertText(`[albumid]${t}[/albumid]`);
                });
            }
        },
        attachments: {
            txtExec: function(t) {
                var e = this;
                i("attachments")._dropDown(e, t, function(t) {
                    e.insertText(`[attach]${t}[/attach]`);
                });
            }
        },
        media: {
            txtExec: function(t) {
                var e = this;
                i("media")._dropDown(e, t, function(t) {
                    e.insertText(`[media]${t}[/media]`);
                });
            }
        },
        vimeo: {
            txtExec: function(t) {
                var e = this;
                i("vimeo")._dropDown(e, t, function(t) {
                    e.insertText(`[vimeo]${t}[/vimeo]`);
                });
            }
        },
        instagram: {
            txtExec: function(t) {
                var e = this;
                i("instagram")._dropDown(e, t, function(t) {
                    e.insertText(`[instagram]${t}[/instagram]`);
                });
            }
        },
        facebook: {
            txtExec: function(t) {
                var e = this;
                i("facebook")._dropDown(e, t, function(t) {
                    e.insertText(`[facebook]${t}[/facebook]`);
                });
            }
        },
        youtube: {
            txtExec: function(t) {
                var e = this;
                i("youtube")._dropDown(e, t, function(t) {
                    e.insertText(`[youtube]${t}[/youtube]`);
                });
            }
        }
    }, y = {
        b: {
            tags: {
                b: null,
                strong: null
            },
            styles: {
                "font-weight": [ "bold", "bolder", "401", "700", "800", "900" ]
            },
            format: "[b]{0}[/b]",
            html: "<strong>{0}</strong>"
        },
        i: {
            tags: {
                i: null,
                em: null
            },
            styles: {
                "font-style": [ "italic", "oblique" ]
            },
            format: "[i]{0}[/i]",
            html: "<em>{0}</em>"
        },
        u: {
            tags: {
                u: null
            },
            styles: {
                "text-decoration": [ "underline" ]
            },
            format: "[u]{0}[/u]",
            html: "<u>{0}</u>"
        },
        s: {
            tags: {
                s: null,
                strike: null
            },
            styles: {
                "text-decoration": [ "line-through" ]
            },
            format: "[s]{0}[/s]",
            html: "<s>{0}</s>"
        },
        sub: {
            tags: {
                sub: null
            },
            format: "[sub]{0}[/sub]",
            html: "<sub>{0}</sub>"
        },
        sup: {
            tags: {
                sup: null
            },
            format: "[sup]{0}[/sup]",
            html: "<sup>{0}</sup>"
        },
        h: {
            tags: {
                h: null,
                mark: null
            },
            format: "[h]{0}[/h]",
            html: "<mark>{0}</mark>"
        },
        font: {
            tags: {
                font: {
                    face: null
                }
            },
            styles: {
                "font-family": null
            },
            quoteType: v.never,
            format: function(t, e) {
                var n;
                return `[font=${a(n = g(t, "font") && (n = s(t, "face")) ? n : p(t, "font-family"))}]${e}[/font]`;
            },
            html: '<font face="{defaultattr}">{0}</font>'
        },
        size: {
            tags: {
                font: {
                    size: null
                }
            },
            styles: {
                "font-size": null
            },
            format: function(t, e) {
                var n = s(t, "size"), r = 2;
                return -1 < (n = n || p(t, "fontSize")).indexOf("px") ? ((n = +n.replace("px", "")) < 12 && (r = 1), 
                15 < n && (r = 3), 17 < n && (r = 4), 23 < n && (r = 5), 31 < n && (r = 6), 
                47 < n && (r = 7)) : r = n, `[size=${r}]${e}[/size]`;
            },
            html: '<font size="{defaultattr}">{!0}</font>'
        },
        color: {
            tags: {
                font: {
                    color: null
                }
            },
            styles: {
                color: null
            },
            quoteType: v.never,
            format: function(t, e) {
                var n;
                return `[color=${d(n = g(t, "font") && (n = s(t, "color")) ? n : t.style.color || p(t, "color"))}]${e}[/color]`;
            },
            html: function(t, e, n) {
                return `<font color="${f(d(e.defaultattr), !0)}">${n}</font>`;
            }
        },
        ul: {
            tags: {
                ul: null
            },
            breakStart: !0,
            isInline: !1,
            skipLastLineBreak: !0,
            format: "[list]{0}[/list]",
            html: "<ul>{0}</ul>"
        },
        list: {
            breakStart: !0,
            isInline: !1,
            skipLastLineBreak: !0,
            format: "[list]{0}[/list]",
            html: "<ul>{0}</ul>"
        },
        ol: {
            tags: {
                ol: null
            },
            breakStart: !0,
            isInline: !1,
            skipLastLineBreak: !0,
            format: "[list=I]{0}[/list]",
            html: "<ol>{0}</ol>"
        },
        li: {
            tags: {
                li: null
            },
            isInline: !1,
            closedBy: [ "/ul", "/ol", "/list", "*", "li" ],
            format: "[li]{0}[/li]",
            html: "<li>{0}</li>"
        },
        "*": {
            isInline: !1,
            closedBy: [ "/ul", "/ol", "/list", "*", "li" ],
            html: "<li>{0}</li>"
        },
        table: {
            tags: {
                table: null
            },
            isInline: !1,
            isHtmlInline: !0,
            skipLastLineBreak: !0,
            format: "[table]{0}[/table]",
            html: '<table class="table">{0}</table>'
        },
        tr: {
            tags: {
                tr: null
            },
            isInline: !1,
            skipLastLineBreak: !0,
            format: "[tr]{0}[/tr]",
            html: "<tr>{0}</tr>"
        },
        th: {
            tags: {
                th: null
            },
            allowsEmpty: !0,
            isInline: !1,
            format: "[th]{0}[/th]",
            html: "<th>{0}</th>"
        },
        td: {
            tags: {
                td: null
            },
            allowsEmpty: !0,
            isInline: !1,
            format: "[td]{0}[/td]",
            html: '<td class="border">{0}</td>'
        },
        hr: {
            tags: {
                hr: null
            },
            allowsEmpty: !0,
            isSelfClosing: !0,
            isInline: !1,
            format: "[hr]{0}",
            html: "<hr />"
        },
        img: {
            allowsEmpty: !0,
            tags: {
                img: {
                    src: null,
                    class: "img-user-posted img-thumbnail"
                }
            },
            allowedChildren: [ "#" ],
            quoteType: v.never,
            format: function(t) {
                var e = s(t, "alt");
                return e ? `[img=${s(t, "src")}]${e}[/img]` : `[img]${s(t, "src")}[/img]`;
            },
            html: function(t, e, n) {
                return e.defaultattr = f(e.defaultattr, !0) || n, `<img src="${r(e.defaultattr)}" alt="${n}" class="img-user-posted img-thumbnail" />`;
            }
        },
        userlink: {
            allowsEmpty: !0,
            tags: {
                span: {
                    class: "badge rounded-pill text-bg-secondary fs-6"
                }
            },
            format: function(t) {
                return `[userlink]${s(t, "data-user")}[/userlink]`;
            },
            html: function(t, e, n) {
                return `<span class="badge rounded-pill text-bg-secondary fs-6" data-user="${f(n)}">${f(n)}</span>`;
            }
        },
        albumimg: {
            allowsEmpty: !0,
            tags: {
                div: {
                    src: null,
                    class: "card text-bg-dark"
                }
            },
            allowedChildren: [ "#" ],
            quoteType: v.never,
            format: function(t) {
                return `[albumimg]${s(t, "alt")}[/albumimg]`;
            },
            html: function(t, e, n) {
                return e.defaultattr = f(e.defaultattr, !0) || n, `<div class="card text-bg-dark" style="max-width:200px" alt="${n}"><img src="${l.albumsPreviewUrl}${r(e.defaultattr)}" class="img-user-posted card-img-top" style="max-height:200px;max-width:200px;object-fit:contain""></div>`;
            }
        },
        url: {
            allowsEmpty: !0,
            tags: {
                a: {
                    href: null
                }
            },
            quoteType: v.never,
            format: function(t, e) {
                const n = s(t, "href");
                return "mailto:" === n.substr(0, 7) ? `[email="${n.substr(7)}"]${e}[/email]` : `[url=${n}]${e}[/url]`;
            },
            html: function(t, e, n) {
                return e.defaultattr = f(e.defaultattr, !0) || n, `<a href="${r(e.defaultattr)}" class="link">${n}</a>`;
            }
        },
        email: {
            quoteType: v.never,
            html: function(t, e, n) {
                return `<a href="mailto:${f(e.defaultattr, !0) || n}">${n}</a>`;
            }
        },
        quote: {
            tags: {
                div: {
                    class: "border rounded mx-3 mb-3 p-3 border-secondary shadow-sm"
                }
            },
            isInline: !1,
            quoteType: v.never,
            format: function(t, e) {
                var n, r = "", i = t.children;
                for (let t = 0; !n && t < i.length; t++) g(i[t], "cite") && (n = i[t]);
                return n && (r = n && n.textContent, n && t.removeChild(n), e = this.elementToBbcode(t), 
                r = "=" + r.replace(/(^\s+|\s+$)/g, ""), n && t.insertBefore(n, t.firstChild)), 
                `[quote${r}]${e}[/quote]`;
            },
            html: function(t, e, n) {
                return `<div class="border rounded mx-3 mb-3 p-3 border-secondary shadow-sm"><span contenteditable="false"><i class="fa fa-quote-left text-primary fs-4 me-2"></i></span>${n = e.defaultattr ? n + '<cite class="card-text text-end d-block text-body-secondary small">' + f(e.defaultattr) + "</cite>" : n}</div>`;
            }
        },
        code: {
            tags: {
                code: {
                    class: null
                }
            },
            isInline: !1,
            allowedChildren: [ "#", "#newline" ],
            format: function(t, e) {
                var n;
                return `[code=${(n = g(t, "code") && (n = s(t, "class")) ? n : t.className.replace("language-", "")).replace("language-", "")}]${e}[/code]`;
            },
            html: '<pre class="border border-danger rounded m-2 p-2"><code class="language-{defaultattr}">{0}</code></pre>'
        },
        left: {
            styles: {
                "text-align": [ "left", "-webkit-left", "-moz-left", "-khtml-left" ]
            },
            isInline: !1,
            allowsEmpty: !0,
            format: "[left]{0}[/left]",
            html: '<div align="left">{0}</div>'
        },
        center: {
            styles: {
                "text-align": [ "center", "-webkit-center", "-moz-center", "-khtml-center" ]
            },
            isInline: !1,
            allowsEmpty: !0,
            format: "[center]{0}[/center]",
            html: '<div align="center">{0}</div>'
        },
        right: {
            styles: {
                "text-align": [ "right", "-webkit-right", "-moz-right", "-khtml-right" ]
            },
            isInline: !1,
            allowsEmpty: !0,
            format: "[right]{0}[/right]",
            html: '<div align="right">{0}</div>'
        },
        justify: {
            styles: {
                "text-align": [ "justify", "-webkit-justify", "-moz-justify", "-khtml-justify" ]
            },
            isInline: !1,
            allowsEmpty: !0,
            format: "[justify]{0}[/justify]",
            html: '<div align="justify">{0}</div>'
        },
        facebook: {
            allowsEmpty: !0,
            tags: {
                div: {
                    "data-facebook-url": null
                }
            },
            format: function(t, e) {
                return (t = s(t, "data-facebook-url")) ? `[facebook]${t}[/facebook]` : e;
            },
            html: function(t, e, n) {
                return `<div class="ratio ratio-1x1" data-oembed-url="${n}" data-facebook-url="${n}"><iframe src="https://www.facebook.com/plugins/post.php?href=${n}"></iframe></div>`;
            }
        },
        instagram: {
            allowsEmpty: !0,
            tags: {
                div: {
                    "data-instagram-url": null
                }
            },
            format: function(t, e) {
                return (t = s(t, "data-instagram-url")) ? `[instagram]${t}[/instagram]` : e;
            },
            html: function(t, e, n) {
                const r = n;
                return `<div class="ratio ratio-1x1" data-oembed-url="https://www.instagram.com/p/${n = r.match(/\/(p|tv|reel)\/(.*?)\//)[2]}" data-instagram-url="${r}"><iframe src="https://www.instagram.com/p/${n}/embed/captioned/"></iframe></div>`;
            }
        },
        vimeo: {
            allowsEmpty: !0,
            tags: {
                div: {
                    "data-vimeo-url": null
                }
            },
            format: function(t, e) {
                return (t = s(t, "data-vimeo-url")) ? `[vimeo]${t}[/vimeo]` : e;
            },
            html: function(t, e, n) {
                const r = n;
                n = r.match(/vimeo\..*\/(\d+)(?:$|\/)/)[1];
                return `<div data-oembed-url="https://vimeo.com/${n}" data-vimeo-url="${r}" class="ratio ratio-16x9 border"><iframe src="https://player.vimeo.com/video/${n}?show_title=1&show_byline=1&show_portrait=1&fullscreen=1"></iframe></div>`;
            }
        },
        youtube: {
            allowsEmpty: !0,
            tags: {
                div: {
                    "data-youtube-url": null
                }
            },
            format: function(t, e) {
                return (t = s(t, "data-youtube-url")) ? `[youtube]${t}[/youtube]` : e;
            },
            html: function(t, e, n) {
                var r = n, n = n.match(/(?:v=|v\/|embed\/|youtu.be\/)?([a-zA-Z0-9_-]{11})/)[1];
                return `<div data-oembed-url="https://youtube.com/embed/${n}" data-youtube-url="${r}" class="ratio ratio-16x9 border"><iframe src="https://youtube.com/embed/${n}?hd=1"></iframe></div>`;
            }
        },
        rtl: {
            styles: {
                direction: [ "rtl" ]
            },
            isInline: !1,
            format: "[rtl]{0}[/rtl]",
            html: '<div style="direction: rtl">{0}</div>'
        },
        ltr: {
            styles: {
                direction: [ "ltr" ]
            },
            isInline: !1,
            format: "[ltr]{0}[/ltr]",
            html: '<div style="direction: ltr">{0}</div>'
        },
        ignore: {}
    };
    function x(t, r) {
        return t.replace(/\{([^}]+)\}/g, function(t, e) {
            var n = !0;
            return "!" === e.charAt(0) && (n = !1, e = e.substring(1)), "0" === e && (n = !1), 
            void 0 === r[e] ? t : n ? f(r[e], !0) : r[e];
        });
    }
    function k(t) {
        return "function" == typeof t;
    }
    function a(t) {
        return t && t.replace(/\\(.)/g, "$1").replace(/^(["'])(.*?)\1$/, "$2");
    }
    var $ = "open", w = "content", E = "newline", B = "close";
    function u(t, e, n, r, i, l) {
        var o = this;
        o.type = t, o.name = e, o.val = n, o.attrs = r || {}, o.children = i || [], 
        o.closing = l || null;
    }
    function T(t) {
        var h = this;
        function o(t, e) {
            var n, r, i;
            return t === $ && (n = e.match(/\[([^\]\s=]+)(?:([^\]]+))?\]/)) && (i = l(n[1]), 
            n[2] && (n[2] = n[2].trim()) && (r = function(t) {
                var e;
                const n = /([^\s=]+)=(?:(?:(["'])((?:\\\2|[^\2])*?)\2)|((?:.(?!\s\S+=))*.))/g, r = {};
                if ("=" === t.charAt(0) && t.indexOf("=", 1) < 0) r.defaultattr = a(t.substr(1)); else for ("=" === t.charAt(0) && (t = "defaultattr" + t); e = n.exec(t); ) r[l(e[1])] = a(e[3]) || e[4];
                return r;
            }(n[2]))), t === B && (n = e.match(/\[\/([^\[\]]+)\]/)) && (i = l(n[1])), 
            (i = t === E ? "#newline" : i) && (t !== $ && t !== B || y[i]) || (t = w, 
            i = "#"), new u(t, i, e, r);
        }
        function d(t, e, n) {
            for (var r = n.length; r--; ) if (n[r].type === e && n[r].name === t) return 1;
        }
        function m(t, e) {
            const n = (t ? y[t.name] : {}).allowedChildren;
            return !h.opts.fixInvalidChildren || !n || -1 < n.indexOf(e.name || "#");
        }
        function c(t, e) {
            for (var n, r, i, l, o, a, s = "", u = function(t) {
                return !1 !== (!t || (void 0 !== t.isHtmlInline ? t.isHtmlInline : t.isInline));
            }; 0 < t.length; ) if (n = t.shift()) {
                if (n.type === $) a = n.children[n.children.length - 1] || {}, r = y[n.name], 
                l = e && u(r), i = c(n.children, !1), a = r && r.html ? (u(r) || !u(y[a.name]) || r.isPreFormatted || r.skipLastLineBreak, 
                k(r.html) ? r.html.call(h, n, n.attrs, i) : (n.attrs[0] = i, x(r.html, n.attrs))) : n.val + i + (n.closing ? n.closing.val : ""); else {
                    if (n.type === E) {
                        if (!e) {
                            s += "<br />";
                            continue;
                        }
                        o || (s += "<div>"), s += "<br />", t.length || (s += "<br />"), 
                        s += "</div>\n", o = !1;
                        continue;
                    }
                    l = e, a = f(n.val, !0);
                }
                l && !o ? (s += "<div>", o = !0) : !l && o && (s += "</div>\n", 
                o = !1), s += a;
            }
            return o && (s += "</div>\n"), s;
        }
        function p(t, e, n) {
            var r = /\s|=/.test(t);
            return k(e) ? e(t, n) : e === v.never || e === v.auto && !r ? t : `"${t.replace(/\\/g, "\\\\").replace(/"/g, '\\"')}"`;
        }
        function g(t) {
            return t.length ? t[t.length - 1] : null;
        }
        function l(t) {
            return t.toLowerCase();
        }
        h.opts = n({}, T.defaults, t), h.tokenize = function(t) {
            var e, n, r;
            const i = [];
            var l = [ {
                type: w,
                regex: /^([^\[\r\n]+|\[)/
            }, {
                type: E,
                regex: /^(\r\n|\r|\n)/
            }, {
                type: $,
                regex: /^\[[^\[\]]+\]/
            }, {
                type: B,
                regex: /^\[\/[^\[\]]+\]/
            } ];
            t: for (;t.length; ) {
                for (r = l.length; r--; ) if (n = l[r].type, (e = t.match(l[r].regex)) && e[0]) {
                    i.push(o(n, e[0])), t = t.substr(e[0].length);
                    continue t;
                }
                t.length && i.push(o(w, t)), t = "";
            }
            return i;
        }, h.parse = function(t, e) {
            var t = function(t) {
                function e() {
                    return g(f);
                }
                function n(t) {
                    (e() ? e().children : c).push(t);
                }
                function r(t) {
                    return e() && (l = y[e().name]) && l.closedBy && -1 < l.closedBy.indexOf(t);
                }
                var i, l, o, a, s, u = [], c = [], f = [];
                for (;i = t.shift(); ) switch (s = t[0], m(e(), i) || i.type === B && e() && i.name === e().name || (i.name = "#", 
                i.type = w), i.type) {
                  case $:
                    r(i.name) && f.pop(), n(i), (l = y[i.name]) && !l.isSelfClosing && (l.closedBy || d(i.name, B, t)) ? f.push(i) : l && l.isSelfClosing || (i.type = w);
                    break;

                  case B:
                    if (e() && i.name !== e().name && r("/" + i.name) && f.pop(), 
                    e() && i.name === e().name) e().closing = i, f.pop(); else if (d(i.name, $, f)) {
                        for (;o = f.pop(); ) {
                            if (o.name === i.name) {
                                o.closing = i;
                                break;
                            }
                            o = o.clone(), u.length && o.children.push(g(u)), u.push(o);
                        }
                        for (s && s.type === E && (l = y[i.name]) && !1 === l.isInline && (n(s), 
                        t.shift()), n(g(u)), a = u.length; a--; ) f.push(u[a]);
                        u.length = 0;
                    } else i.type = w, n(i);
                    break;

                  case E:
                    e() && s && r((s.type === B ? "/" : "") + s.name) && (s.type === B && s.name === e().name || ((l = y[e().name]) && l.breakAfter || l && !1 === l.isInline && h.opts.breakAfterBlock && !1 !== l.breakAfter) && f.pop()), 
                    n(i);
                    break;

                  default:
                    n(i);
                }
                return c;
            }(h.tokenize(t)), n = h.opts;
            return n.fixInvalidNesting && function t(e, n, r, i) {
                var l, o, a, s, u;
                const c = function(t) {
                    const e = y[t.name];
                    return !e || !1 !== e.isInline;
                };
                n = n || [];
                i = i || e;
                for (o = 0; o < e.length; o++) if ((l = e[o]) && l.type === $) {
                    if (r && !c(l)) {
                        if (a = g(n), u = a.splitAt(l), s = 1 < n.length ? n[n.length - 2].children : i, 
                        m(l, a)) {
                            const f = a.clone();
                            f.children = l.children, l.children = [ f ];
                        }
                        if (-1 < (a = s.indexOf(a))) {
                            u.children.splice(0, 1), s.splice(a + 1, 0, l, u);
                            const d = u.children[0];
                            return void (d && d.type === E && !c(l) && (u.children.splice(0, 1), 
                            s.splice(a + 2, 0, d)));
                        }
                    }
                    n.push(l), t(l.children, n, r || c(l), i), n.pop();
                }
            }(t), function t(e, n, r) {
                var i, l, o, a, s, u, c, f;
                var d = e.length;
                n && (a = y[n.name]);
                var m = d;
                for (;m--; ) (i = e[m]) && (i.type === E ? (l = 0 < m ? e[m - 1] : null, 
                o = m < d - 1 ? e[m + 1] : null, f = !1, !r && a && !0 !== a.isSelfClosing && (l ? u || o || (!1 === a.isInline && h.opts.breakEndBlock && !1 !== a.breakEnd && (f = !0), 
                a.breakEnd && (f = !0), u = f) : (!1 === a.isInline && h.opts.breakStartBlock && !1 !== a.breakStart && (f = !0), 
                a.breakStart && (f = !0))), l && l.type === $ && (s = y[l.name]) && (r ? !1 === s.isInline && (f = !0) : (!1 === s.isInline && h.opts.breakAfterBlock && !1 !== s.breakAfter && (f = !0), 
                s.breakAfter && (f = !0))), !r && !c && o && o.type === $ && (s = y[o.name]) && (!1 === s.isInline && h.opts.breakBeforeBlock && !1 !== s.breakBefore && (f = !0), 
                s.breakBefore && (f = !0), c = f) ? e.splice(m, 1) : (f && e.splice(m, 1), 
                c = !1)) : i.type === $ && t(i.children, i, r));
            }(t, null, e), n.removeEmptyTags && function t(e) {
                var n, r;
                const i = function(t) {
                    for (var e = t.length; e--; ) {
                        const n = t[e].type;
                        if (n === $ || n === B) return !1;
                        if (n === w && /\S|\u00A0/.test(t[e].val)) return !1;
                    }
                    return !0;
                };
                var l = e.length;
                for (;l--; ) (n = e[l]) && n.type === $ && (r = y[n.name], t(n.children), 
                i(n.children) && r && !r.isSelfClosing && !r.allowsEmpty && e.splice.apply(e, [ l, 1 ].concat(n.children)));
            }(t), t;
        }, h.toHTML = function(t, e) {
            return c(h.parse(t, e), !0);
        }, h.toHTMLFragment = function(t, e) {
            return c(h.parse(t, e), !1);
        }, h.toBBCode = function(t, e) {
            return function t(e) {
                var n, r, i, l, o, a, s, u, c, f = "";
                for (;0 < e.length; ) if (n = e.shift()) if (i = y[n.name], c = !(!i || !1 !== i.isInline), 
                l = i && i.isSelfClosing, a = c && h.opts.breakBeforeBlock && !1 !== i.breakBefore || i && i.breakBefore, 
                s = c && !l && h.opts.breakStartBlock && !1 !== i.breakStart || i && i.breakStart, 
                u = c && h.opts.breakEndBlock && !1 !== i.breakEnd || i && i.breakEnd, 
                c = c && h.opts.breakAfterBlock && !1 !== i.breakAfter || i && i.breakAfter, 
                o = (i ? i.quoteType : null) || h.opts.quoteType || v.auto, i || n.type !== $) if (n.type === $) {
                    if (a && (f += "\n"), f += "[" + n.name, n.attrs) for (r in n.attrs.defaultattr && (f += "=" + p(n.attrs.defaultattr, o, "defaultattr"), 
                    delete n.attrs.defaultattr), n.attrs) n.attrs.hasOwnProperty(r) && (f += ` ${r}=` + p(n.attrs[r], o, r));
                    f += "]", s && (f += "\n"), n.children && (f += t(n.children)), 
                    l || i.excludeClosing || (u && (f += "\n"), f += `[/${n.name}]`), 
                    c && (f += "\n"), n.closing && l && (f += n.closing.val);
                } else f += n.val; else f += n.val, n.children && (f += t(n.children)), 
                n.closing && (f += n.closing.val);
                return f;
            }(h.parse(t, e));
        };
    }
    function c(t) {
        return t = parseInt(t, 10), isNaN(t) ? "00" : (t = Math.max(0, Math.min(t, 255)).toString(16)).length < 2 ? "0" + t : t;
    }
    function d(t) {
        var e;
        return (e = (t = t || "#000").match(/rgb\((\d{1,3}),\s*?(\d{1,3}),\s*?(\d{1,3})\)/i)) ? "#" + c(e[1]) + c(e[2]) + c(e[3]) : (e = t.match(/#([0-9a-f])([0-9a-f])([0-9a-f])\s*?$/i)) ? "#" + e[1] + e[1] + e[2] + e[2] + e[3] + e[3] : t;
    }
    function m() {
        var u = this, i = (u.stripQuotes = a, {}), d = {
            ul: [ "li", "ol", "ul" ],
            ol: [ "li", "ol", "ul" ],
            table: [ "tr" ],
            tr: [ "td", "th" ],
            code: [ "br", "p", "div" ]
        };
        function m(l, o, e) {
            function a(t) {
                var e = t[0];
                const n = t[1];
                var t = h.getStyle(l, e), r = l.parentNode;
                return !(!t || r && h.hasStyle(r, e, t)) && (!n || n.includes(t));
            }
            function t(t) {
                i[t] && i[t][e] && b(i[t][e], function(t, e) {
                    var r, n = y[t].strictMatch, i = (n = void 0 === n ? u.opts.strictMatch : n) ? "every" : "some";
                    if (!e || e[i]((r = n, function(t) {
                        var e = t[0];
                        const n = t[1];
                        return ("style" !== e || "CODE" !== l.nodeName) && ("style" === e && n ? n[r ? "every" : "some"](a) : (t = s(l, e)) && (!n || n.includes(t)));
                    }))) return e = y[t].format, o = k(e) ? e.call(u, l, o) : function(t) {
                        var n = arguments;
                        return t.replace(/\{(\d+)\}/g, function(t, e) {
                            return void 0 !== n[+e + 1] ? n[+e + 1] : `{${e}}`;
                        });
                    }(e, o), !1;
                });
            }
            return t("*"), t(l.nodeName.toLowerCase()), o;
        }
        function c(t, e) {
            function f(t, s, u) {
                var c = "";
                return h.traverse(t, function(t) {
                    var e = "", n = t.nodeType, r = t.nodeName.toLowerCase(), i = "code" === r, l = d[r], o = t.firstChild, a = !0;
                    u && !(a = -1 < u.indexOf(r)) && (l = u), 1 === n ? g(t, ".sceditor-nlf") && !o || ("iframe" !== r && (e = f(t, s || i, l)), 
                    a ? (s || (i || (e = m(t, e, !1)), e = m(t, e, !0)), c += function(n, r) {
                        var i, l, o = n.nodeName.toLowerCase();
                        const a = h.isInline;
                        if (!a(n, !0) || "br" === o) {
                            let t;
                            let e = n.previousSibling;
                            for (;e && 1 === e.nodeType && !g(e, "br") && a(e, !0) && !e.firstChild; ) e = e.previousSibling;
                            for (;l = (i = n.parentNode) && i.lastChild, t = l === n, 
                            (n = i) && t && a(i, !0); );
                            t && "li" !== o || (r += "\n"), "br" !== o && e && !g(e, "br") && a(e, !0) && (r = `
` + r);
                        }
                        return r;
                    }(t, e)) : c += e) : 3 === n && (c += t.nodeValue);
                }, !1, !0), c;
            }
            return f(t, e);
        }
        function t(t, e, n) {
            var r = new T(u.opts.parserOptions);
            const i = t || n ? r.toHTMLFragment : r.toHTML;
            return l = u.opts, i(u.opts.bbcodeTrim ? e.trim() : e);
        }
        function e(t, e, n, r) {
            n = n || document;
            var i, l = !!h.closest(r, "code");
            const o = n.createElement("div"), a = n.createElement("div"), s = new T(u.opts.parserOptions);
            for (a.innerHTML = e, p(o, "visibility", "hidden"), o.appendChild(a), 
            n.body.appendChild(o), t && (o.insertBefore(n.createTextNode("#"), o.firstChild), 
            o.appendChild(n.createTextNode("#"))), r && p(a, "whiteSpace", p(r, "whiteSpace")), 
            i = a.getElementsByClassName("sceditor-ignore"); i.length; ) i[0].parentNode.removeChild(i[0]);
            return h.removeWhiteSpace(o), e = c(a, l), n.body.removeChild(o), e = s.toBBCode(e, !0), 
            e = u.opts.bbcodeTrim ? e.trim() : e;
        }
        u.init = function() {
            u.opts = this.opts, u.elementToBbcode = c, b(y, function(n, t) {
                var r = !1 === t.isInline, t = y[n].tags, e = y[n].styles;
                e && (i["*"] = i["*"] || {}, i["*"][r] = i["*"][r] || {}, i["*"][r][n] = [ [ "style", Object.entries(e) ] ]), 
                t && b(t, function(t, e) {
                    e && e.style && (e.style = Object.entries(e.style)), i[t] = i[t] || {}, 
                    i[t][r] = i[t][r] || {}, i[t][r][n] = e && Object.entries(e);
                });
            }), this.commands = n(!0, {}, o, this.commands), this.toBBCode = u.toSource, 
            this.fromBBCode = u.toHtml;
        }, u.toHtml = t.bind(null, !1), u.fragmentToHtml = t.bind(null, !0), u.toSource = e.bind(null, !1), 
        u.fragmentToSource = e.bind(null, !0);
    }
    u.prototype = {
        clone: function() {
            var t = this;
            return new u(t.type, t.name, t.val, n({}, t.attrs), [], t.closing ? t.closing.clone() : null);
        },
        splitAt: function(t) {
            var e;
            const n = this.clone();
            t = this.children.indexOf(t);
            return -1 < t && (e = this.children.length - t, n.children = this.children.splice(t, e)), 
            n;
        }
    }, T.QuoteType = v, T.defaults = {
        breakBeforeBlock: !1,
        breakStartBlock: !1,
        breakEndBlock: !1,
        breakAfterBlock: !0,
        removeEmptyTags: !0,
        fixInvalidNesting: !0,
        fixInvalidChildren: !0,
        quoteType: v.auto,
        strictMatch: !1
    }, m.get = function(t) {
        return y[t] || null;
    }, m.set = function(t, e) {
        return t && e && ((e = n(y[t] || {}, e)).remove = function() {
            delete y[t];
        }, y[t] = e), this;
    }, m.rename = function(t, e) {
        return t in y && (y[e] = y[t], delete y[t]), this;
    }, m.remove = function(t) {
        return t in y && delete y[t], this;
    }, m.formatBBCodeString = x, t.formats.bbcode = m, t.BBCodeParser = T;
}(sceditor);

!function(s) {
    "use strict";
    var f = s.dom, o = {
        albums: '<i class="fa-solid fa-images"></i',
        attachments: '<i class="fa-solid fa-paperclip"></i',
        bold: '<i class="fa-solid fa-bold"></i>',
        bulletlist: '<i class="fa-solid fa-list-ul"></i>',
        center: '<i class="fa-solid fa-align-center"></i>',
        code: '<i class="fa-solid fa-code"></i>',
        color: '<span class="fa-stack me-2 pe-2"><i class="fas fa-font fa-stack-1x"></i><i class="fa fa-xs fa-palette sce-color fa-badge"></i></span>',
        copy: '<i class="fa-solid fa-copy"></i>',
        cut: '<i class="fa-solid fa-scissors"></i>',
        email: '<i class="fa-solid fa-envelope"></i>',
        emojis: '<i class="fa-solid fa-face-smile"></i>',
        extensions: '<i class="fa-solid fa-plug"></i>',
        font: '<span class="fa-stack me-2 pe-2"><i class="fas fa-font fa-stack-1x"></i><i class="fa fa-xs fa-font fa-badge"></i></span>',
        format: '<i class="fa-solid fa-font"></i>',
        grip: '<svg xmlns="http://www.w3.org/2000/svg"viewbox="0 0 16 16" unselectable="on"><path d="M14.656 5.156l-10 10 .688.688 10-10-.688-.688zm0 3l-7 7 .688.688 7-7-.688-.688zm0 3l-4 4 .688.688 4-4-.688-.688z"/></svg>',
        mark: '<i class="fa-solid fa-highlighter"></i>',
        horizontalrule: '<i class="fa-solid fa-grip-lines"></i>',
        image: '<i class="fa-solid fa-image"></i>',
        indent: '<i class="fa-solid fa-indent"></i>',
        italic: '<i class="fa-solid fa-italic"></i>',
        justify: '<i class="fa-solid fa-align-justify"></i>',
        left: '<i class="fa-solid fa-align-left"></i>',
        link: '<i class="fa-solid fa-link"></i>',
        maximize: '<i class="fa-solid fa-maximize"></i>',
        media: '<i class="fa-solid fa-photo-film"></i>',
        orderedlist: '<i class="fa-solid fa-list-ol"></i>',
        outdent: '<i class="fa-solid fa-outdent"></i>',
        paste: '<i class="fa-solid fa-paste"></i>',
        pastetext: '<i class="fa-solid fa-paste"></i>',
        quote: '<i class="fa-solid fa-quote-left"></i>',
        redo: '<i class="fa-solid fa-redo"></i>',
        removeformat: '<i class="fa-solid fa-remove-format"></i>',
        reply: '<i class="fa-solid fa-reply"></i>',
        right: '<i class="fa-solid fa-align-right"></i>',
        size: '<span class="fa-stack me-2 pe-2"><i class="fas fa-font fa-stack-1x"></i><i class="fa fa-xs fa-up-down fa-badge"></i></span>',
        source: '<i class="fa-solid fa-file-code"></i>',
        strike: '<i class="fa-solid fa-strikethrough"></i>',
        table: '<i class="fa-solid fa-table"></i>',
        underline: '<i class="fa-solid fa-underline"></i>',
        undo: '<i class="fa-solid fa-undo"></i>',
        unlink: '<i class="fa-solid fa-link-slash"></i>',
        vimeo: '<i class="fa-brands fa-vimeo"></i>',
        instagram: '<i class="fa-brands fa-instagram"></i>',
        facebook: '<i class="fa-brands fa-facebook"></i>',
        youtube: '<i class="fa-brands fa-youtube"></i>'
    };
    s.icons.fontawesome = function() {
        var l, i = {};
        return {
            create: function(a) {
                return a in o && (i[a] = s.dom.parseHTML(o[a]).firstChild, "color" === a && (l = i[a].querySelector(".sce-color"))), 
                i[a];
            },
            update: function(s, i) {
                if (l) {
                    let a = "inherit";
                    !s && i && (a = i.ownerDocument.queryCommandValue("forecolor")), 
                    f.css(l, "color", a);
                }
            },
            rtl: function(a) {
                var s = i.grip;
                s && (f.css(s, "transform", a = a ? "scaleX(-1)" : ""), f.css(s, "msTransform", a), 
                f.css(s, "webkitTransform", a));
            }
        };
    }, s.icons.fontawesome.icons = o;
}((document, sceditor));

!function(l) {
    "use strict";
    var v = void 0 !== window.FileReader;
    l.plugins.dragdrop = function() {
        var t, A, r, i, a, o;
        function s() {
            a.style.display = "none", i.className = i.className.replace(/(^| )dnd( |$)/g, "");
        }
        function d() {
            return 1;
        }
        function f(e) {
            var n = document.createElement("img");
            function t(e) {
                const t = A.getBody().ownerDocument.getElementById(n.id);
                t && ("string" == typeof e && t.insertAdjacentHTML("afterend", e), 
                t.parentNode.removeChild(t));
            }
            return n.src = "data:image/gif;base64,R0lGODlhlgBkAPABAH19ffb29iH5BAAKAAAAIf4aQ3JlYXRlZCB3aXRoIGFqYXhsb2FkLmluZm8AIf8LTkVUU0NBUEUyLjADAQAAACwAAAAAlgBkAAAC1YyPqcvtD6OctNqLs968+w+G4kiW5omm6sq27gvH8kzX9o3n+s73/g8MCofEovGITCqXzKbzCY1Kp9Sq9YrNarfcrvcLDovH5LL5jE6r1+y2+w2Py+f0uv2OvwD2fP6iD/gH6Pc2GIhg2JeQSNjGuLf4GMlYKIloefAIUEl52ZmJyaY5mUhqyFnqmQr6KRoaMKp66hbLumpQ69oK+5qrOyg4a6qYV2x8jJysvMzc7PwMHS09TV1tfY2drb3N3e39DR4uPk5ebn6Onq6+zt7u/g4fL99UAAAh+QQACgAAACwAAAAAlgBkAIEAAAB9fX329vYAAAAC3JSPqcvtD6OctNqLs968+w+G4kiW5omm6sq27gvH8kzX9o3n+s73/g8MCofEovGITCqXzKbzCY1Kp9Sq9YrNarfcrvcLDovH5LL5jE6r1+y2+w2Py+f0uv2OvwD2fP4iABgY+CcoCNeHuJdQyLjIaOiWiOj4CEhZ+SbZd/nI2RipqYhQOThKGpAZCuBZyArZprpqSupaCqtaazmLCRqai7rb2av5W5wqSShcm8fc7PwMHS09TV1tfY2drb3N3e39DR4uPk5ebn6Onq6+zt7u/g4fLz9PX29/j5/vVAAAIfkEAAoAAAAsAAAAAJYAZACBAAAAfX199vb2AAAAAuCUj6nL7Q+jnLTai7PevPsPhuJIluaJpurKtu4Lx/JM1/aN5/rO9/4PDAqHxKLxiEwql8ym8wmNSqfUqvWKzWq33K73Cw6Lx+Sy+YxOq9fstvsNj8vn9Lr9jr8E9nz+AgAYGLjQVwhXiJgguAiYgGjo9tinyCjoKLn3hpmJUGmJsBmguUnpCXCJOZraaXoKShoJe9DqehCqKlnqiZobuzrbyvuIO8xqKpxIPKlwrPCbBx0tPU1dbX2Nna29zd3t/Q0eLj5OXm5+jp6uvs7e7v4OHy8/T19vf4+fr7/P379UAAAh+QQACgAAACwAAAAAlgBkAIEAAAB9fX329vYAAAAC4JSPqcvtD6OctNqLs968+w+G4kiW5omm6sq27gvH8kzX9o3n+s73/g8MCofEovGITCqXzKbzCY1Kp9Sq9YrNarfcrvcLDovH5LL5jE6r1+y2+w2Py+f0uv2OvwT2fP6iD7gAMEhICAeImIAYiFDoOPi22KcouZfw6BhZGUBZeYlp6LbJiTD6CQqg6Vm6eQqqKtkZ24iaKtrKunpQa9tmmju7Wwu7KFtMi3oYDMzompkHHS09TV1tfY2drb3N3e39DR4uPk5ebn6Onq6+zt7u/g4fLz9PX29/j5+vv8/f31QAADs=", 
            n.className = "sceditor-ignore", n.id = "sce-dragdrop-" + o++, function() {
                return e ? e.parentNode.replaceChild(n, e) : A.wysiwygEditorInsertHtml(n.outerHTML), 
                {
                    insert: function(e) {
                        t(e);
                    },
                    cancel: t
                };
            };
        }
        function e(e) {
            var t = e.dataTransfer, n = t.files.length || !t.items ? t.files : t.items;
            for (let e = 0; e < n.length; e++) if ("string" === n[e].kind) return;
            "none" === a.style.display && (a.style.display = "block", i.className += " dnd"), 
            e.preventDefault();
        }
        function n(e) {
            var t = e.dataTransfer, n = t.files.length || !t.items ? t.files : t.items;
            s();
            for (let e = 0; e < n.length; e++) {
                if ("string" === n[e].kind) return;
                d(n[e]), r(n[e], f());
            }
            e.preventDefault();
        }
        v && (o = 0, this.signalReady = function() {
            t = (A = this).opts.dragdrop || {}, r = t.handleFile, i = A.getContentAreaContainer().parentNode, 
            a = i.appendChild(l.dom.parseHTML('<div class="sceditor-dnd-cover" style="display: none"></div>').firstChild), 
            i.addEventListener("dragover", e), i.addEventListener("dragleave", s), 
            i.addEventListener("dragend", s), i.addEventListener("drop", n), A.getBody().addEventListener("dragover", e), 
            A.getBody().addEventListener("drop", s);
        }, this.signalPasteHtml = function(e) {
            s(), "handlePaste" in t && !t.handlePaste || r(e, f());
        });
    };
}(sceditor);

!function() {
    "use strict";
    sceditor.plugins.undo = function() {
        var n, i, a, o, r = this, s = "", c = 0, u = !1, d = !1, l = !1, e = 50, t = [], g = 0;
        function f(e) {
            if (d = !0, i.sourceMode(e.sourceMode), e.sourceMode) i.val(e.value, !1), 
            i.sourceEditorCaret(e.caret); else if (i.getBody().innerHTML = e.value, 
            e.caret) {
                var t = i.getRangeHelper().selectedRange(), n = t, e = e.caret;
                try {
                    var o = e.startPositions, r = e.endPositions;
                    n.setStart(m(a, o), o[0]), n.setEnd(m(a, r), r[0]);
                } catch (e) {
                    console && console.warn && console.warn("[SCEditor] Undo plugin lost caret", e);
                }
                i.getRangeHelper().selectRange(t);
            }
            i.focus(), d = !1;
        }
        function h(e, t) {
            var n = e[t];
            e[t] = function() {
                var e = u;
                !e && !d && o && i.getRangeHelper().hasSelection() && v(), u = !0, 
                n.apply(this, arguments), e || (u = !1, d || (p(), s = ""));
            };
        }
        function p() {
            g && (t.length -= g, g = 0), 0 < e && t.length > e && t.shift(), o = {}, 
            v(), t.push(o);
        }
        function v() {
            var e = i.sourceMode(), e = (o.caret = e ? i.sourceEditorCaret() : function(e) {
                if (e) return a.normalize(), {
                    startPositions: y(e.startContainer, e.startOffset),
                    endPositions: y(e.endContainer, e.endOffset)
                };
            }(i.getRangeHelper().selectedRange()), (o.sourceMode = e) ? i.getSourceEditorValue(!1) : i.getBody().innerHTML);
            const t = document.getElementById("editor-Counter"), n = i.opts.maxLength;
            i.val().length > n ? r.undo() : t.textContent = n - i.val().length, 
            o.value = e;
        }
        function E() {
            n === document.activeElement && r.signalSelectionchangedEvent();
        }
        function y(e, t) {
            const n = [ t ];
            for (var o = e; o && "BODY" !== o.tagName; ) n.push(function(e) {
                var t = 0;
                for (;e = e.previousSibling; ) t++;
                return t;
            }(o)), o = o.parentNode;
            return n;
        }
        function m(t, n) {
            for (let e = n.length - 1; t && 0 < e; e--) t = t.childNodes[n[e]];
            return t;
        }
        r.init = function() {
            e = (i = this).undoLimit || e, i.addShortcut("ctrl+z", r.undo), i.addShortcut("ctrl+shift+z", r.redo), 
            i.addShortcut("ctrl+y", r.redo);
        }, r.signalReady = function() {
            function e(e) {
                "historyUndo" === e.inputType ? (r.undo(), e.preventDefault()) : "historyRedo" === e.inputType && (r.redo(), 
                e.preventDefault());
            }
            function t() {
                s = "", p();
            }
            n = i.getContentAreaContainer().nextSibling, a = i.getBody(), p(), h(i, "setWysiwygEditorValue"), 
            h(i, "setSourceEditorValue"), h(i, "sourceEditorInsertText"), h(i.getRangeHelper(), "insertNode"), 
            h(i, "toggleSourceMode"), a.addEventListener("beforeinput", e), n.addEventListener("beforeinput", e), 
            a.addEventListener("compositionend", t), n.addEventListener("compositionend", t), 
            document.addEventListener("selectionchange", E);
        }, r.destroy = function() {
            document.removeEventListener("selectionchange", E);
        }, r.undo = function() {
            return o = null, g < t.length - 1 && (g++, f(t[t.length - 1 - g])), 
            !1;
        }, r.redo = function() {
            return 0 < g && (g--, f(t[t.length - 1 - g])), !1;
        }, r.signalSelectionchangedEvent = function() {
            d || l ? l = !1 : (o && v(), s = "");
        }, r.signalInputEvent = function(e) {
            var t = e.inputType;
            if (l = !0, t && !e.isComposing) switch (e.inputType) {
              case "deleteContentBackward":
                o && s === t && c < 20 ? v() : (p(), c = 0), s = t;
                break;

              case "insertText":
                c += e.data ? e.data.length : 1, o && s === t && c < 20 && !/\s$/.test(e.data) ? v() : (p(), 
                c = 0), s = t;
                break;

              default:
                s = "sce-misc", c = 0, p();
            }
        };
    };
}();

!function(t) {
    "use strict";
    var i = t.utils, l = t.dom;
    t.plugins.plaintext = function() {
        var n = !0;
        this.init = function() {
            var t = this.commands, e = this.opts;
            e && e.plaintext && e.plaintext.addButton && (n = e.plaintext.enabled, 
            t.pastetext = i.extend(t.pastetext || {}, {
                state: function() {
                    return n ? 1 : 0;
                },
                exec: function() {
                    n = !n;
                }
            }));
        }, this.signalPasteRaw = function(t) {
            var e;
            n && (t.html && !t.text && ((e = document.createElement("div")).innerHTML = t.html, 
            i.each(e.querySelectorAll("p"), function(t, e) {
                l.convertElement(e, "div");
            }), i.each(e.querySelectorAll("br"), function(t, e) {
                e.nextSibling && l.isInline(e.nextSibling, !0) || e.parentNode.removeChild(e);
            }), document.body.appendChild(e), t.text = e.innerText, document.body.removeChild(e)), 
            t.html = null);
        };
    };
}(sceditor);

function mentions(opts = {}) {
    opts = Object.assign({}, {
        lookup: "lookup",
        id: "",
        selector: "",
        element: null,
        symbol: "@",
        items: [],
        item_template: '<a class="dropdown-item" href="#" style="font-family: var(--bs-body-font-family);"><img src="${item.avatar}" alt="avatar" class="me-2 img-thumbnail" style="max-width:20px;max-height:20px" /> ${item.name}</a>',
        onclick: undefined,
        url: ""
    }, opts);
    const $e = opts.element.inSourceMode() ? opts.element.getSourceEditor() : opts.element.getContentAreaContainer().contentWindow.document.body;
    if (!$e) return console.error("Invalid element selector", opts);
    var $lookup = document.createElement("div");
    $lookup.classList = `fixed-top autohide ${opts.lookup}`;
    $e.parentNode.insertBefore($lookup, $e.nextSibling);
    $e.addEventListener("keydown", processKey);
    $e.addEventListener("keyup", showLookup);
    $e.addEventListener("click", hideLookup);
    var start, end, prevWord;
    var isFixed = false;
    var $el = $lookup.parentNode;
    while ($el && $el.nodeName.toLowerCase() !== "body" && !isFixed) {
        isFixed = window.getComputedStyle($el).getPropertyValue("position").toLowerCase() === "fixed";
        $el = $el.parentElement;
    }
    function showLookup(event) {
        if (event.code === "Escape") {
            return hideLookup();
        }
        var sel, text, curr;
        if (opts.element.inSourceMode()) {
            sel = document.getSelection();
            var $parent = opts.element.getSourceEditor();
            text = $parent.value || "";
            curr = sel.baseOffset;
        } else {
            sel = opts.element.getContentAreaContainer().contentWindow.document.getSelection();
            text = opts.element.val() || "";
            curr = sel.baseOffset;
        }
        var getLength = arr => arr instanceof Array && arr.length > 0 ? arr[0].length : 0;
        start = curr - getLength(text.slice(0, curr).match(/[\S]+$/g));
        end = curr + getLength(text.slice(curr).match(/^[\S]+/g));
        var word = text.substring(start, end);
        if (!word || word[0] !== opts.symbol) {
            prevWord = "";
            return hideLookup();
        }
        if (word === prevWord) return;
        prevWord = word;
        var pos = {
            x: 0,
            y: 0
        };
        var parentRect = opts.element.inSourceMode() ? opts.element.getSourceEditor().getBoundingClientRect() : opts.element.getContentAreaContainer().contentWindow.document.body.getBoundingClientRect();
        pos.y = parentRect.top + 30;
        pos.x = parentRect.left + 20;
        $lookup.style.left = pos.x + "px";
        $lookup.style.top = pos.y + "px";
        var query = word.slice(1);
        if (query.length >= 3) {
            fetch(opts.url.replace("{q}", query), {
                method: "GET",
                headers: {
                    Accept: "application/json",
                    "Content-Type": "application/json;charset=utf-8",
                    RequestVerificationToken: document.querySelector('input[name="__RequestVerificationToken"]').value
                }
            }).then(response => response.json()).then(data => opts.items = data);
        }
        var items = opts.items.filter(e => e.name.toLowerCase().includes(word.slice(1).toLowerCase())).map(item => eval('`<li class="mention-li-nt ${opts.lookup}" data-name = "${item.name}" data-id = "${item.id}">' + opts.item_template + "</li>`"));
        if (!items.length) return hideLookup();
        $lookup.innerHTML = `<ul class="dropdown-menu show">${items.join("")}</ul>`;
        [ ...$lookup.firstElementChild.children ].forEach($el => $el.addEventListener("click", onClick) || $el.addEventListener("mouseenter", onHover));
        $lookup.firstElementChild.children[0].classList.add("active");
        if ($lookup.hasAttribute("hidden")) $lookup.removeAttribute("hidden");
        var bounding = $lookup.getBoundingClientRect();
        if (!(bounding.top >= 0 && bounding.left >= 0 && bounding.bottom <= (window.innerHeight || document.documentElement.clientHeight) && bounding.right <= (window.innerWidth || document.documentElement.clientWidth))) $lookup.style.top = parseInt($lookup.style.top) - 10 - $lookup.clientHeight + "px";
    }
    function hideLookup() {
        if (!$lookup.hasAttribute("hidden")) $lookup.setAttribute("hidden", true);
    }
    function onClick(event) {
        const deleteItem = event.target.classList.contains("mention-li-nt") ? event.target : event.target.parentElement;
        opts.onclick(deleteItem.dataset);
        var value = opts.element.val();
        opts.element.val(value.replace(value.substring(start + 1, end), ""));
        hideLookup();
    }
    function onHover(event) {
        const $el = event.target.closest(".mention-li-nt");
        if ($el.classList.contains("active")) return;
        [ ...$lookup.firstElementChild.children ].filter($el => $el.classList.contains("active")).forEach($el => $el.classList.remove("active"));
        $el.classList.add("active");
    }
    function processKey(event) {
        const code = event.key;
        if ([ "ArrowUp", "ArrowDown", "Enter" ].indexOf(code) == -1 || $lookup.hasAttribute("hidden")) return;
        event.preventDefault();
        if (code == "Enter") return $lookup.querySelector(".active").click();
        const $children = [ ...$lookup.firstElementChild.children ];
        const curr = $children.findIndex($el => $el.classList.contains("active"));
        $children[curr].classList.remove("active");
        const $next = $children[($children.length + curr + (code == "ArrowUp" ? -1 : 1)) % $children.length];
        $next.classList.add("active");
        $next.scrollIntoView(false);
    }
}